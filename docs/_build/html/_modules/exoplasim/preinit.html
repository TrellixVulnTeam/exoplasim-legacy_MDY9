

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>exoplasim.preinit &mdash; ExoPlaSim 2.0.4 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> ExoPlaSim
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../source/exoplasim.html">exoplasim package</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ExoPlaSim</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../exoplasim.html">exoplasim</a> &raquo;</li>
        
      <li>exoplasim.preinit</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for exoplasim.preinit</h1><div class="highlight"><pre>
<span></span><span class="k">global</span> <span class="n">sourcedir</span>
<span class="n">sourcedir</span> <span class="o">=</span> <span class="kc">None</span>


<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">netCDF4</span> <span class="k">as</span> <span class="nn">nc</span>
<span class="kn">import</span> <span class="nn">exoplasim.gcmt</span>

<span class="n">smws</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;mH2&#39;</span><span class="p">:</span> <span class="mf">2.01588</span><span class="p">,</span>
        <span class="s1">&#39;mHe&#39;</span><span class="p">:</span> <span class="mf">4.002602</span><span class="p">,</span>
        <span class="s1">&#39;mN2&#39;</span><span class="p">:</span> <span class="mf">28.0134</span><span class="p">,</span>
        <span class="s1">&#39;mO2&#39;</span><span class="p">:</span> <span class="mf">31.9988</span><span class="p">,</span>
        <span class="s1">&#39;mCO2&#39;</span><span class="p">:</span><span class="mf">44.01</span><span class="p">,</span>
        <span class="s1">&#39;mAr&#39;</span><span class="p">:</span> <span class="mf">39.948</span><span class="p">,</span>
        <span class="s1">&#39;mNe&#39;</span><span class="p">:</span> <span class="mf">20.1797</span><span class="p">,</span>
        <span class="s1">&#39;mKr&#39;</span><span class="p">:</span> <span class="mf">83.798</span><span class="p">,</span>
        <span class="s1">&#39;mH2O&#39;</span><span class="p">:</span><span class="mf">18.01528</span><span class="p">}</span>

<span class="n">gases_default</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;pH2&#39;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
                   <span class="s1">&#39;pHe&#39;</span><span class="p">:</span> <span class="mf">5.24e-6</span><span class="p">,</span>
                   <span class="s1">&#39;pN2&#39;</span><span class="p">:</span> <span class="mf">0.78084</span><span class="p">,</span>
                   <span class="s1">&#39;pO2&#39;</span><span class="p">:</span> <span class="mf">0.20946</span><span class="p">,</span>
                   <span class="s1">&#39;pCO2&#39;</span><span class="p">:</span><span class="mf">330.0e-6</span><span class="p">,</span>
                   <span class="s1">&#39;pAr&#39;</span><span class="p">:</span> <span class="mf">9.34e-3</span><span class="p">,</span>
                   <span class="s1">&#39;pNe&#39;</span><span class="p">:</span> <span class="mf">18.18e-6</span><span class="p">,</span>
                   <span class="s1">&#39;pKr&#39;</span><span class="p">:</span> <span class="mf">1.14e-6</span><span class="p">,</span>
                   <span class="s1">&#39;pH2O&#39;</span><span class="p">:</span><span class="mf">0.01</span><span class="p">}</span>

<div class="viewcode-block" id="noneparse"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.noneparse">[docs]</a><span class="k">def</span> <span class="nf">noneparse</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="n">dtype</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">text</span><span class="o">==</span><span class="s2">&quot;None&quot;</span> <span class="ow">or</span> <span class="n">text</span><span class="o">==</span><span class="s2">&quot;none&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">dtype</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>
    
<span class="c1">#def readsourcepath():</span>
    <span class="c1">#with open(&quot;sourcepath&quot;,&quot;r&quot;) as sf:</span>
        <span class="c1">#spth = sf.read()</span>
        <span class="c1">#if spth.strip()==&quot;None&quot;:</span>
            <span class="c1">#sourcedir=None</span>
        <span class="c1">#else:</span>
            <span class="c1">#sourcedir=spth.strip()</span>
            
    <span class="c1">#return sourcedir</span>

<div class="viewcode-block" id="Model"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model">[docs]</a><span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">resolution</span><span class="o">=</span><span class="s2">&quot;T21&quot;</span><span class="p">,</span><span class="n">layers</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">ncpus</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">precision</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span><span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">inityear</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">recompile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">optimization</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">mars</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">workdir</span><span class="o">=</span><span class="s2">&quot;most&quot;</span><span class="p">,</span><span class="n">source</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">modelname</span><span class="o">=</span><span class="s2">&quot;MOST_EXP&quot;</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Initialize an ExoPlaSim model configuration. By default, the current directory</span>
<span class="sd">           is assumed to be the working directory.&#39;&#39;&#39;</span>
        
        <span class="k">global</span> <span class="n">sourcedir</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sourcedir</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;spth=$(python3 -c &quot;import exoplasim as exo; print(exo.__path__)&quot;) &amp;&amp; echo $spth&gt;sourcepath&#39;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;sourcepath&quot;</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">spf</span><span class="p">:</span>
                <span class="n">sourcedir</span> <span class="o">=</span> <span class="n">spf</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">sourcedir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;[&quot;</span><span class="p">:</span>
                    <span class="n">sourcedir</span><span class="o">=</span><span class="n">sourcedir</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">if</span> <span class="n">sourcedir</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;]&quot;</span><span class="p">:</span>
                    <span class="n">sourcedir</span><span class="o">=</span><span class="n">sourcedir</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">sourcedir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;&#39;&quot;</span><span class="p">:</span>
                    <span class="n">sourcedir</span><span class="o">=</span><span class="n">sourcedir</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">if</span> <span class="n">sourcedir</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;&#39;&quot;</span><span class="p">:</span>
                    <span class="n">sourcedir</span><span class="o">=</span><span class="n">sourcedir</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/__init__.py&quot;</span><span class="o">%</span><span class="n">sourcedir</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sourcef</span><span class="p">:</span>
                <span class="n">sourcecode</span> <span class="o">=</span> <span class="n">sourcef</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">sourcecode</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;sourcedir = &quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span><span class="o">%</span><span class="n">sourcedir</span>
            <span class="n">sourcecode</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sourcecode</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2">/__init__.py </span><span class="si">%s</span><span class="s2">/preinit.py&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">sourcedir</span><span class="p">,</span><span class="n">sourcedir</span><span class="p">))</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/__init__.py&quot;</span><span class="o">%</span><span class="n">sourcedir</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">sourcef</span><span class="p">:</span>
                <span class="n">sourcef</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">sourcecode</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">runscript</span><span class="o">=</span><span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">otherargs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="o">=</span><span class="n">modelname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cleaned</span><span class="o">=</span><span class="kc">False</span>
        
        <span class="k">if</span> <span class="n">debug</span> <span class="ow">or</span> <span class="n">optimization</span><span class="p">:</span> <span class="c1">#There is no need to set these for precompiled binaries</span>
            <span class="n">recompile</span><span class="o">=</span><span class="kc">True</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">ncpus</span> <span class="o">=</span> <span class="n">ncpus</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncpus</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_exec</span> <span class="o">=</span> <span class="s2">&quot;mpiexec -np </span><span class="si">%d</span><span class="s2"> &quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">ncpus</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_exec</span> <span class="o">=</span> <span class="s2">&quot;./&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="n">layers</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">odir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">workdir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="s2">&quot;/&quot;</span><span class="p">:</span>
            <span class="n">workdir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">odir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">workdir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">workdir</span> <span class="o">=</span> <span class="n">workdir</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mkdir &quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span><span class="o">=</span><span class="n">inityear</span>
        
        <span class="c1"># Depending on how the user has entered the resolution, set the appropriate number</span>
        <span class="c1"># of spectral modes and latitudes</span>
        <span class="k">if</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;T21&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;t21&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">21</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">32</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nsp</span><span class="o">=</span><span class="mi">21</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="o">=</span><span class="mi">32</span>
        <span class="k">elif</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;T42&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;t42&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">42</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">64</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nsp</span><span class="o">=</span><span class="mi">42</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="o">=</span><span class="mi">64</span>
        <span class="k">elif</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;T63&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;t63&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">63</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">96</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nsp</span><span class="o">=</span><span class="mi">63</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="o">=</span><span class="mi">96</span>
        <span class="k">elif</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;T85&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;t85&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">85</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">128</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nsp</span><span class="o">=</span><span class="mi">85</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="o">=</span><span class="mi">128</span>
        <span class="k">elif</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;T106&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;T106&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">106</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">160</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nsp</span><span class="o">=</span><span class="mi">106</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="o">=</span><span class="mi">160</span>
        <span class="k">elif</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;T127&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;t127&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">127</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">192</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nsp</span><span class="o">=</span><span class="mi">127</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="o">=</span><span class="mi">192</span>
        <span class="k">elif</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;T170&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="s2">&quot;t170&quot;</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">170</span> <span class="ow">or</span> <span class="n">resolution</span><span class="o">==</span><span class="mi">256</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nsp</span><span class="o">=</span><span class="mi">170</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="o">=</span><span class="mi">256</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Resolution unsupported. ExoPlaSim supports T21, T42, T63, T85, &quot;</span><span class="o">+</span>
                             <span class="s2">&quot;T106, T127, and T170 (32, 64, 96, 128, 160, 192, and 256 &quot;</span><span class="o">+</span>
                             <span class="s2">&quot;latitudes respectively&quot;</span><span class="p">)</span>
        
        <span class="c1"># If the executable does not exist, then regardless of whether we&#39;ve been asked</span>
        <span class="c1"># to recompile, we&#39;ll have to recompile</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">=</span> <span class="n">sourcedir</span><span class="o">+</span><span class="s2">&quot;/plasim/run/most_plasim_t</span><span class="si">%d</span><span class="s2">_l</span><span class="si">%d</span><span class="s2">_p</span><span class="si">%d</span><span class="s2">.x&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nsp</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span><span class="n">ncpus</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">source</span><span class="p">:</span>
           <span class="n">source</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/plasim/run&quot;</span><span class="o">%</span><span class="n">sourcedir</span>
        
        <span class="n">burnsource</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/postprocessor&quot;</span><span class="o">%</span><span class="n">sourcedir</span>
        
        <span class="k">if</span> <span class="n">recompile</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executable</span><span class="p">):</span>
            <span class="n">extraflags</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                <span class="n">extraflags</span><span class="o">+=</span> <span class="s2">&quot;-d &quot;</span>
            <span class="k">if</span> <span class="n">optimization</span><span class="p">:</span>
                <span class="n">extraflags</span><span class="o">+=</span> <span class="s2">&quot;-O </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">optimization</span>
            <span class="k">if</span> <span class="n">mars</span><span class="p">:</span>
                <span class="n">extraflags</span><span class="o">+=</span> <span class="s2">&quot;-m &quot;</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cwd=$(pwd) &amp;&amp; &quot;</span><span class="o">+</span>
                      <span class="s2">&quot;cd </span><span class="si">%s</span><span class="s2"> &amp;&amp; ./compile.sh -n </span><span class="si">%d</span><span class="s2"> -p </span><span class="si">%d</span><span class="s2"> -r T</span><span class="si">%d</span><span class="s2"> -v </span><span class="si">%d</span><span class="s2"> &quot;</span><span class="o">%</span><span class="p">(</span><span class="n">sourcedir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">ncpus</span><span class="p">,</span>
                                                                        <span class="n">precision</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">nsp</span><span class="p">,</span>
                                                                        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span><span class="o">+</span>
                      <span class="n">extraflags</span><span class="o">+</span><span class="s2">&quot; &amp;&amp;&quot;</span><span class="o">+</span>
                      <span class="s2">&quot;cd $cwd&quot;</span><span class="p">)</span>
        
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2">/* </span><span class="si">%s</span><span class="s2">/&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">source</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2">/burn7.x </span><span class="si">%s</span><span class="s2">/&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">burnsource</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
        
        <span class="c1">#Copy the executable to the working directory, and then CD there</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">executable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">executable</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="c1">#Strip off all the preceding path</span>
    
        
<div class="viewcode-block" id="Model.run"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.run">[docs]</a>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">runscript</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_run</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">runscript</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="c1">#runscript MUST accept a Model object as the first arg</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crash</span><span class="p">()</span></div>
        
<div class="viewcode-block" id="Model.runtobalance"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.runtobalance">[docs]</a>    <span class="k">def</span> <span class="nf">runtobalance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">threshhold</span> <span class="o">=</span> <span class="mf">4.0e-4</span><span class="p">,</span><span class="n">baseline</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span><span class="n">maxyears</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span><span class="n">minyears</span><span class="o">=</span><span class="mi">75</span><span class="p">):</span>
        <span class="n">runlimit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span><span class="o">+</span><span class="n">maxyears</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mkdir snapshots&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mkdir highcadence&quot;</span><span class="p">)</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isbalanced</span><span class="p">(</span><span class="n">threshhold</span><span class="o">=</span><span class="n">threshhold</span><span class="p">,</span><span class="n">baseline</span><span class="o">=</span><span class="n">baseline</span><span class="p">)</span> \
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span><span class="o">&lt;</span><span class="n">minyears</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span><span class="o">&lt;</span><span class="n">runlimit</span><span class="p">:</span>
            <span class="n">dataname</span><span class="o">=</span><span class="s2">&quot;MOST.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">snapname</span><span class="o">=</span><span class="s2">&quot;MOST_SNAP.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">hcname</span>  <span class="o">=</span><span class="s2">&quot;MOST_HC.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">diagname</span><span class="o">=</span><span class="s2">&quot;MOST_DIAG.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">restname</span><span class="o">=</span><span class="s2">&quot;MOST_REST.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">snowname</span><span class="o">=</span><span class="s2">&quot;MOST_SNOW.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            
            <span class="c1">#Run ExoPlaSim</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_exec</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">executable</span><span class="p">)</span>
            
            <span class="c1">#Sort, categorize, and arrange the various outputs</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e restart_dsnow ] &amp;&amp; rm restart_dsnow&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e restart_xsnow ] &amp;&amp; rm restart_xsnow&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e Abort_Message ] &amp;&amp; exit 1&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_output ] &amp;&amp; mv plasim_output &quot;</span><span class="o">+</span><span class="n">dataname</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_snapshot ] &amp;&amp; mv plasim_snapshot &quot;</span><span class="o">+</span><span class="n">snapname</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_hcadence ] &amp;&amp; mv plasim_hcadence &quot;</span><span class="o">+</span><span class="n">hcname</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_diag ] &amp;&amp; mv plasim_diag &quot;</span><span class="o">+</span><span class="n">diagname</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_status ] &amp;&amp; cp plasim_status plasim_restart&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_status ] &amp;&amp; mv plasim_status &quot;</span><span class="o">+</span><span class="n">restname</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e restart_snow ] &amp;&amp; mv restart_snow &quot;</span><span class="o">+</span><span class="n">snowname</span><span class="p">)</span>
            
            <span class="c1">#Do any additional work</span>
            <span class="n">timeavg</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">snapsht</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">highcdn</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">timeavg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">dataname</span><span class="p">,</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,</span>
                                        <span class="n">log</span><span class="o">=</span><span class="s2">&quot;burnout&quot;</span><span class="p">,</span><span class="n">crashifbroken</span><span class="o">=</span><span class="n">crashifbroken</span><span class="p">)</span>
                <span class="n">snapsht</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">snapname</span><span class="p">,</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,</span>
                                        <span class="n">log</span><span class="o">=</span><span class="s2">&quot;snapout&quot;</span><span class="p">,</span><span class="n">crashifbroken</span><span class="o">=</span><span class="n">crashifbroken</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mv </span><span class="si">%s</span><span class="s2">.nc snapshots/&quot;</span><span class="o">%</span><span class="n">snapname</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]:</span>
                    <span class="n">highcdn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">hcname</span>  <span class="p">,</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,</span>
                                            <span class="n">log</span><span class="o">=</span><span class="s2">&quot;hcout&quot;</span>  <span class="p">,</span><span class="n">crashifbroken</span><span class="o">=</span><span class="n">crashifbroken</span><span class="p">)</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mv </span><span class="si">%s</span><span class="s2">.nc highcadence/&quot;</span><span class="o">%</span><span class="n">hcname</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">crash</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">clean</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">timeavg</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">dataname</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">snapsht</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">snapname</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">highcdn</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">hcname</span><span class="p">)</span>
                    
            <span class="k">if</span> <span class="n">crashifbroken</span><span class="p">:</span> <span class="c1">#Check to see that we aren&#39;t throwing NaNs</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">check</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">integritycheck</span><span class="p">(</span><span class="n">dataname</span><span class="o">+</span><span class="s2">&quot;.nc&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crash</span><span class="p">()</span>
                
            <span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">sb</span><span class="p">,</span><span class="n">tb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getbalance</span><span class="p">()</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;echo </span><span class="si">%02.6f</span><span class="s2">  </span><span class="si">%02.6f</span><span class="s2">&#39;&gt;&gt;</span><span class="si">%s</span><span class="s2">/balance.log&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">sb</span><span class="p">,</span><span class="n">tb</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
        <span class="n">bott</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gethistory</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;hfns&quot;</span><span class="p">)</span>
        <span class="n">topt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gethistory</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;ntr&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/shistory.pso&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="s2">&quot;a+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">text</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bott</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/toahistory.pso&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="s2">&quot;a+&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">text</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topt</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="n">finished</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isbalanced</span><span class="p">(</span><span class="n">threshhold</span><span class="o">=</span><span class="n">threshhold</span><span class="p">,</span><span class="n">baseline</span><span class="o">=</span><span class="n">baseline</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">finished</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>
    
            
<div class="viewcode-block" id="Model.getbalance"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.getbalance">[docs]</a>    <span class="k">def</span> <span class="nf">getbalance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">year</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">topt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="s2">&quot;ntr&quot;</span><span class="p">,</span><span class="n">savg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">tavg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">)</span>
        <span class="n">bott</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">inspect</span><span class="p">(</span><span class="s2">&quot;hfns&quot;</span><span class="p">,</span><span class="n">savg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">tavg</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">year</span><span class="o">=</span><span class="n">year</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">topt</span><span class="p">,</span><span class="n">bott</span></div>
    
<div class="viewcode-block" id="Model.gethistory"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.gethistory">[docs]</a>    <span class="k">def</span> <span class="nf">gethistory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;ts&quot;</span><span class="p">,</span><span class="n">mean</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">layer</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">files</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/MOST*.nc&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
        <span class="n">dd</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)):</span>
            <span class="n">ncd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
            <span class="n">variable</span> <span class="o">=</span> <span class="n">ncd</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">key</span><span class="p">][:]</span>
            <span class="n">lon</span> <span class="o">=</span> <span class="n">ncd</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">][:]</span>
            <span class="n">lat</span> <span class="o">=</span> <span class="n">ncd</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">][:]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">variable</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">3</span><span class="p">:</span>
                <span class="n">variable</span> <span class="o">=</span> <span class="n">variable</span><span class="p">[:,</span><span class="n">layer</span><span class="p">,:,:]</span>
            <span class="n">dd</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">gcmt</span><span class="o">.</span><span class="n">spatialmath</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span><span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span>
                                     <span class="n">mean</span><span class="o">=</span><span class="n">mean</span><span class="p">,</span><span class="n">radius</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
            <span class="n">ncd</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">dd</span></div>
    
    
    <span class="k">def</span> <span class="nf">_isbalanced</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">threshold</span> <span class="o">=</span> <span class="mf">1.0e-4</span><span class="p">,</span><span class="n">baseline</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
        <span class="n">nfiles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">((</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/MOST*.nc&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)))</span>
        <span class="n">prior</span><span class="o">=</span><span class="kc">False</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/toahistory.ps*&quot;</span><span class="p">))</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">toahistory</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/toahistory.pso&quot;</span><span class="p">)</span>
            <span class="n">nfiles</span><span class="o">+=</span><span class="nb">len</span><span class="p">(</span><span class="n">toahistory</span><span class="p">)</span>
            <span class="n">shistory</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/shistory.pso&quot;</span><span class="p">)</span>
            <span class="n">prior</span><span class="o">=</span><span class="kc">True</span>
        <span class="n">sbalance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nfiles</span><span class="p">)</span>
        <span class="n">toabalance</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">nfiles</span><span class="p">)</span>
        <span class="n">nstart</span><span class="o">=</span><span class="mi">0</span>
        <span class="k">if</span> <span class="n">prior</span><span class="p">:</span>
            <span class="n">sbalance</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">toahistory</span><span class="p">)]</span> <span class="o">=</span> <span class="n">shistory</span><span class="p">[:]</span>
            <span class="n">toabalance</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">toahistory</span><span class="p">)]</span> <span class="o">=</span> <span class="n">toahistory</span><span class="p">[:]</span>
            <span class="n">nstart</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">toahistory</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span> <span class="o">&lt;</span> <span class="n">baseline</span><span class="p">:</span> <span class="c1">#Run for minimum of baseline years</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span><span class="p">):</span>
                <span class="n">topt</span><span class="p">,</span><span class="n">bott</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getbalance</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
                <span class="n">sbalance</span><span class="p">[</span><span class="n">n</span><span class="o">+</span><span class="n">nstart</span><span class="p">]</span> <span class="o">=</span> <span class="n">bott</span>
                <span class="n">toabalance</span><span class="p">[</span><span class="n">n</span><span class="o">+</span><span class="n">nstart</span><span class="p">]</span> <span class="o">=</span> <span class="n">topt</span>
            <span class="n">savgs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">tavgs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">sbalance</span><span class="p">)):</span>
                <span class="n">savgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">sbalance</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">9</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">])))</span> <span class="c1">#10-year average energy balance</span>
                <span class="n">tavgs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">toabalance</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">9</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">])))</span>
            <span class="n">sslopes</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">tslopes</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">savgs</span><span class="p">)):</span> <span class="c1">#5-baseline slopes in distance from energy balance</span>
                <span class="n">sslopes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">savgs</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">tslopes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">tavgs</span><span class="p">[</span><span class="n">n</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">savgslope</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">sslopes</span><span class="p">[</span><span class="o">-</span><span class="mi">30</span><span class="p">:]))</span> <span class="c1">#30-year average of 5-year slopes  </span>
            <span class="n">tavgslope</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">tslopes</span><span class="p">[</span><span class="o">-</span><span class="mi">30</span><span class="p">:]))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;echo &#39;</span><span class="si">%02.8f</span><span class="s2">  </span><span class="si">%02.8f</span><span class="s2">&#39;&gt;&gt;</span><span class="si">%s</span><span class="s2">/slopes.log&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">savgslope</span><span class="p">,</span><span class="n">tavgslope</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">savgslope</span><span class="o">&lt;</span><span class="n">threshhold</span> <span class="ow">and</span> <span class="n">tavgslope</span><span class="o">&lt;</span><span class="n">threshhold</span><span class="p">:</span> <span class="c1">#Both TOA and Surface are changing at average </span>
                <span class="k">return</span> <span class="kc">True</span>                                  <span class="c1"># of &lt;0.1 mW/m^2/yr on 45-year baselines</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
        
    <span class="k">def</span> <span class="nf">_run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">years</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">postprocess</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">crashifbroken</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">clean</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mkdir snapshots&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mkdir highcadence&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">years</span><span class="p">):</span>
            <span class="n">dataname</span><span class="o">=</span><span class="s2">&quot;MOST.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">snapname</span><span class="o">=</span><span class="s2">&quot;MOST_SNAP.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">hcname</span>  <span class="o">=</span><span class="s2">&quot;MOST_HC.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">diagname</span><span class="o">=</span><span class="s2">&quot;MOST_DIAG.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">restname</span><span class="o">=</span><span class="s2">&quot;MOST_REST.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            <span class="n">snowname</span><span class="o">=</span><span class="s2">&quot;MOST_SNOW.</span><span class="si">%05d</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span>
            
            <span class="c1">#Run ExoPlaSim</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_exec</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">executable</span><span class="p">)</span>
            
            <span class="c1">#Sort, categorize, and arrange the various outputs</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e restart_dsnow ] &amp;&amp; rm restart_dsnow&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e restart_xsnow ] &amp;&amp; rm restart_xsnow&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e Abort_Message ] &amp;&amp; exit 1&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_output ] &amp;&amp; mv plasim_output &quot;</span><span class="o">+</span><span class="n">dataname</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_snapshot ] &amp;&amp; mv plasim_snapshot &quot;</span><span class="o">+</span><span class="n">snapname</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_hcadence ] &amp;&amp; mv plasim_hcadence &quot;</span><span class="o">+</span><span class="n">hcname</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_diag ] &amp;&amp; mv plasim_diag &quot;</span><span class="o">+</span><span class="n">diagname</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_status ] &amp;&amp; cp plasim_status plasim_restart&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e plasim_status ] &amp;&amp; mv plasim_status &quot;</span><span class="o">+</span><span class="n">restname</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;[ -e restart_snow ] &amp;&amp; mv restart_snow &quot;</span><span class="o">+</span><span class="n">snowname</span><span class="p">)</span>
            
            <span class="c1">#Do any additional work</span>
            <span class="n">timeavg</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">snapsht</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">highcdn</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">if</span> <span class="n">postprocess</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">timeavg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">dataname</span><span class="p">,</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,</span>
                                            <span class="n">log</span><span class="o">=</span><span class="s2">&quot;burnout&quot;</span><span class="p">,</span><span class="n">crashifbroken</span><span class="o">=</span><span class="n">crashifbroken</span><span class="p">)</span>
                    <span class="n">snapsht</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">snapname</span><span class="p">,</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,</span>
                                            <span class="n">log</span><span class="o">=</span><span class="s2">&quot;snapout&quot;</span><span class="p">,</span><span class="n">crashifbroken</span><span class="o">=</span><span class="n">crashifbroken</span><span class="p">)</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mv </span><span class="si">%s</span><span class="s2">.nc snapshots/&quot;</span><span class="o">%</span><span class="n">snapname</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]:</span>
                        <span class="n">highcdn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">hcname</span>  <span class="p">,</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,</span>
                                                <span class="n">log</span><span class="o">=</span><span class="s2">&quot;hcout&quot;</span>  <span class="p">,</span><span class="n">crashifbroken</span><span class="o">=</span><span class="n">crashifbroken</span><span class="p">)</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mv </span><span class="si">%s</span><span class="s2">.nc highcadence/&quot;</span><span class="o">%</span><span class="n">hcname</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crash</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">clean</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">timeavg</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">dataname</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">snapsht</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">snapname</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">highcdn</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">hcname</span><span class="p">)</span>
                    
            <span class="k">if</span> <span class="n">crashifbroken</span><span class="p">:</span> <span class="c1">#Check to see that we aren&#39;t throwing NaNs</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">check</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">integritycheck</span><span class="p">(</span><span class="n">dataname</span><span class="o">+</span><span class="s2">&quot;.nc&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">crash</span><span class="p">()</span>
                
            <span class="bp">self</span><span class="o">.</span><span class="n">currentyear</span> <span class="o">+=</span> <span class="mi">1</span>
    
<div class="viewcode-block" id="Model.postprocess"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.postprocess">[docs]</a>    <span class="k">def</span> <span class="nf">postprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">inputfile</span><span class="p">,</span><span class="n">namelist</span><span class="p">,</span><span class="n">log</span><span class="o">=</span><span class="s2">&quot;postprocess.log&quot;</span><span class="p">,</span><span class="n">crashifbroken</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">stat</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;./burn7.x -n&lt;</span><span class="si">%s</span><span class="s2">&gt;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">.nc&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">namelist</span><span class="p">,</span><span class="n">log</span><span class="p">,</span><span class="n">inputfile</span><span class="p">,</span><span class="n">inputfile</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">stat</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;NetCDF output written to </span><span class="si">%s</span><span class="s2">.nc; log written to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">inputfile</span><span class="p">,</span><span class="n">log</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">crashifbroken</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Error writing output to </span><span class="si">%s</span><span class="s2">.nc; &quot;</span><span class="o">%</span><span class="n">inputfile</span> <span class="o">+</span>
                                   <span class="s2">&quot;log written to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">log</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Error writing output to </span><span class="si">%s</span><span class="s2">.nc; log written to </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">inputfile</span><span class="p">,</span><span class="n">log</span><span class="p">))</span>
            <span class="k">return</span> <span class="mi">0</span></div>
        
<div class="viewcode-block" id="Model.integritycheck"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.integritycheck">[docs]</a>    <span class="k">def</span> <span class="nf">integritycheck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ncfile</span><span class="p">):</span> <span class="c1">#MUST pass a NetCDF file that contains surface temperature</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="n">ioe</span><span class="o">=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">ncfile</span><span class="p">):</span> <span class="c1">#If the specified output file does not exist, create it</span>
            <span class="n">ioe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">ncfile</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,</span><span class="n">crashifbroken</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ioe</span><span class="p">:</span>
            <span class="n">ncd</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">ncfile</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ts</span> <span class="o">=</span> <span class="n">ncd</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s2">&quot;ts&quot;</span><span class="p">][:]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Output is missing surface temperature; check logs for errors&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">ts</span><span class="p">))</span><span class="o">+</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">ts</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Non-finite values found in surface temperature&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span></div>
                
<div class="viewcode-block" id="Model.finalize"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.finalize">[docs]</a>    <span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">outputdir</span><span class="p">,</span><span class="n">allyears</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">keeprestarts</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">clean</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">outputdir</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="s2">&quot;/&quot;</span><span class="p">:</span>
            <span class="n">outputdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">outputdir</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">outputdir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mkdir </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="n">outputdir</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">allyears</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">outputdir</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mkdir </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2">/MOST*.nc </span><span class="si">%s</span><span class="s2">/&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapshots</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp -r </span><span class="si">%s</span><span class="s2">/snapshots </span><span class="si">%s</span><span class="s2">/snapshots&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s1">&#39;toggle&#39;</span><span class="p">]:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp -r </span><span class="si">%s</span><span class="s2">/highcadence </span><span class="si">%s</span><span class="s2">/highcadence&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2">/MOST*DIAG* </span><span class="si">%s</span><span class="s2">/&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">keeprestarts</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2">/MOST_REST* </span><span class="si">%s</span><span class="s2">/&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="c1">#else:</span>
            <span class="c1">#    restarts = sorted(glob.glob(&quot;%s/MOST_REST*&quot;%self.workdir))</span>
            <span class="c1">#    os.system(&quot;cp %s %s/%s_restart&quot;%(restarts[-1],</span>
            <span class="c1">#                                        self.modelname,self.modelname))</span>
            <span class="n">newworkdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">outputs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/MOST*.nc&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">outputdir</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">.nc&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">outputs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="n">diags</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/MOST*DIAG*&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">.DIAG&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">diags</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapshots</span><span class="p">:</span>
                <span class="n">snps</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/snapshots/*.nc&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">_snapshot.nc&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">snps</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]:</span>
                <span class="n">hcs</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/highcadence/MOST*.nc&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">_highcadence.nc&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">hcs</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">keeprestarts</span><span class="p">:</span>
                <span class="n">rsts</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/MOST_REST*&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">_restart&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">rsts</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">clean</span><span class="p">:</span>
                <span class="n">newworkdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cleaned</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">if</span> <span class="n">clean</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm -rf </span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">workdir</span> <span class="o">=</span> <span class="n">newworkdir</span></div>
                
    
<div class="viewcode-block" id="Model.get"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">year</span><span class="p">,</span><span class="n">snapshot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">highcadence</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1">#Note: if the work directory has been cleaned out, only the final year will be returned.</span>
        <span class="k">if</span> <span class="n">snapshot</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">highcadence</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;snapshots/MOST_SNAP.</span><span class="si">%05d</span><span class="s2">.nc&quot;</span><span class="o">%</span><span class="n">year</span>
        <span class="k">elif</span> <span class="n">highcadence</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">snapshot</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;highcadence/MOST_HC.</span><span class="si">%05d</span><span class="s2">.nc&quot;</span><span class="o">%</span><span class="n">year</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;MOST.</span><span class="si">%05d</span><span class="s2">.nc&quot;</span><span class="o">%</span><span class="n">year</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cleaned</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">snapshot</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">highcadence</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_snapshot.nc&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span>
            <span class="k">elif</span> <span class="n">highcadence</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">snapshot</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">_highcadence.nc&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.nc&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">name</span><span class="p">):</span>
            <span class="n">ncd</span> <span class="o">=</span> <span class="n">nc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">ncd</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Output file </span><span class="si">%s</span><span class="s2"> not found.&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">name</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="Model.inspect"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.inspect">[docs]</a>    <span class="k">def</span> <span class="nf">inspect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">variable</span><span class="p">,</span><span class="n">year</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span><span class="n">ignoreNaNs</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">snapshot</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">highcadence</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">savg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">tavg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">layer</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#Note: if the work directory has been cleaned out, only the final year will be returned.</span>
        <span class="k">if</span> <span class="n">snapshot</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">highcadence</span><span class="p">:</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="s2">&quot;snapshots/MOST_SNAP&quot;</span>
        <span class="k">elif</span> <span class="n">highcadence</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">snapshot</span><span class="p">:</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="s2">&quot;highcadence/MOST_HC&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="s2">&quot;MOST&quot;</span>
        
        <span class="k">if</span> <span class="n">ignoreNaNs</span><span class="p">:</span>
            <span class="n">meanop</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">meanop</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span>
        
        <span class="k">if</span> <span class="n">year</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">nfiles</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">pattern</span><span class="o">+</span><span class="s2">&quot;*.nc&quot;</span><span class="p">))</span>
            <span class="n">year</span> <span class="o">=</span> <span class="n">nfiles</span><span class="o">+</span><span class="n">year</span>
    
        <span class="n">ncd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="n">snapshot</span><span class="o">=</span><span class="n">snapshot</span><span class="p">,</span><span class="n">highcadence</span><span class="o">=</span><span class="n">highcadence</span><span class="p">)</span>
        
        <span class="n">var</span> <span class="o">=</span> <span class="n">ncd</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">variable</span><span class="p">][:]</span>
        
        <span class="k">if</span> <span class="n">variable</span><span class="o">!=</span><span class="s2">&quot;lat&quot;</span> <span class="ow">and</span> <span class="n">variable</span><span class="o">!=</span><span class="s2">&quot;lon&quot;</span> <span class="ow">and</span> <span class="n">variable</span><span class="o">!=</span><span class="s2">&quot;lev&quot;</span> <span class="ow">and</span> <span class="n">variable</span><span class="o">!=</span><span class="s2">&quot;time&quot;</span><span class="p">:</span>
            <span class="n">lon</span> <span class="o">=</span> <span class="n">ncd</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">][:]</span>
            <span class="n">lat</span> <span class="o">=</span> <span class="n">ncd</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">][:]</span>
            <span class="n">lev</span> <span class="o">=</span> <span class="n">ncd</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="s1">&#39;lev&#39;</span><span class="p">][:]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">savg</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">tavg</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">var</span>
            <span class="k">elif</span> <span class="n">tavg</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">savg</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">meanop</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">tavg</span> <span class="ow">and</span> <span class="n">savg</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span> <span class="c1">#3D spatial array, plus time</span>
                <span class="c1">#We&#39;re going to get a scalar; user has specified a level</span>
                    <span class="k">return</span> <span class="n">gcmt</span><span class="o">.</span><span class="n">spatialmath</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span><span class="n">ignoreNaNs</span><span class="o">=</span><span class="n">ignoreNaNs</span><span class="p">,</span><span class="n">lev</span><span class="o">=</span><span class="n">layer</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span><span class="o">==</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span>
                    <span class="c1">#We&#39;re going to get a 1D vertical profile where each layer is a spatial avg</span>
                    <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lev</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lev</span><span class="p">)):</span>
                        <span class="n">output</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">=</span> <span class="n">gcmt</span><span class="o">.</span><span class="n">spatialmath</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span>
                                                     <span class="n">ignoreNaNs</span><span class="o">=</span><span class="n">ignoreNaNs</span><span class="p">,</span><span class="n">lev</span><span class="o">=</span><span class="n">l</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">output</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span> <span class="c1">#2D spatial array, plus time</span>
                    <span class="k">return</span> <span class="n">gcmt</span><span class="o">.</span><span class="n">spatialmath</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span><span class="n">ignoreNaNs</span><span class="o">=</span><span class="n">ignoreNaNs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span> <span class="c1">#3D spatial array, plus time</span>
                <span class="c1">#We&#39;re going to get a 1D array; user has specified a level</span>
                    <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">)):</span>
                        <span class="n">output</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">gcmt</span><span class="o">.</span><span class="n">spatialmath</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span><span class="n">ignoreNaNs</span><span class="o">=</span><span class="n">ignoreNaNs</span><span class="p">,</span>
                                                     <span class="n">lev</span><span class="o">=</span><span class="n">layer</span><span class="p">,</span><span class="n">time</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">output</span>
                <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span><span class="o">==</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">==</span><span class="mi">4</span><span class="p">:</span>
                    <span class="c1">#We&#39;re going to get a 1D vertical profile plus time</span>
                    <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">len</span><span class="p">(</span><span class="n">lev</span><span class="p">)))</span>
                    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
                        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lev</span><span class="p">)):</span>
                            <span class="n">output</span><span class="p">[</span><span class="n">t</span><span class="p">,</span><span class="n">l</span><span class="p">]</span> <span class="o">=</span> <span class="n">gcmt</span><span class="o">.</span><span class="n">spatialmath</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span><span class="n">time</span><span class="o">=</span><span class="n">t</span><span class="p">,</span>
                                                     <span class="n">ignoreNaNs</span><span class="o">=</span><span class="n">ignoreNaNs</span><span class="p">,</span><span class="n">lev</span><span class="o">=</span><span class="n">l</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">output</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span> <span class="c1">#2D spatial array, plus time</span>
                    <span class="c1">#We&#39;re going to get a 1D array</span>
                    <span class="n">output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">var</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">)):</span>
                        <span class="n">output</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">=</span> <span class="n">gcmt</span><span class="o">.</span><span class="n">spatialmath</span><span class="p">(</span><span class="n">var</span><span class="p">,</span><span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span><span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span>
                                                     <span class="n">time</span><span class="o">=</span><span class="n">t</span><span class="p">,</span><span class="n">ignoreNaNs</span><span class="o">=</span><span class="n">ignoreNaNs</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">output</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">var</span></div>
                
    
<div class="viewcode-block" id="Model.crash"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.crash">[docs]</a>    <span class="k">def</span> <span class="nf">crash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;..&quot;</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;mv </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">_crashed&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;ExoPlaSim has crashed or begun producing garbage. All working files have been moved to </span><span class="si">%s</span><span class="s2">_crashed/&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="p">))</span></div>
        
<div class="viewcode-block" id="Model.configure"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.configure">[docs]</a>    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">noutput</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">flux</span><span class="o">=</span><span class="mf">1367.0</span><span class="p">,</span><span class="n">startemp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">starspec</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">pH2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">pHe</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">pN2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">pO2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">pCO2</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">pAr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">pNe</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">pKr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">pH2O</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">gascon</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">pressure</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">pressurebroaden</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">vtype</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">rotationperiod</span><span class="o">=</span><span class="mf">24.0</span><span class="p">,</span><span class="n">synchronous</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">substellarlon</span><span class="o">=</span><span class="mf">180.0</span><span class="p">,</span>
               <span class="n">restartfile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">gravity</span><span class="o">=</span><span class="mf">9.80665</span><span class="p">,</span><span class="n">radius</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">eccentricity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">obliquity</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">lonvernaleq</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">fixedorbit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">orography</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">seaice</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">co2weathering</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">evolveco2</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">physicsfilter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">filterkappa</span><span class="o">=</span><span class="mf">8.0</span><span class="p">,</span><span class="n">filterpower</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span><span class="n">filterLHN0</span><span class="o">=</span><span class="mf">15.0</span><span class="p">,</span><span class="n">diffusionwaven</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">qdiffusion</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">tdiffusion</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">zdiffusion</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">ddiffusion</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">diffusionpower</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">erosionsupplylimit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">outgassing</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span><span class="n">snowicealbedo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">twobandalbedo</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">maxsnow</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">soilalbedo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">oceanalbedo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">oceanzenith</span><span class="o">=</span><span class="s2">&quot;ECHAM-3&quot;</span><span class="p">,</span><span class="n">wetsoil</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">soilwatercap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">aquaplanet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
               <span class="n">desertplanet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">soilsaturation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">drycore</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">ozone</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
               <span class="n">cpsoil</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">soildepth</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span><span class="n">mldepth</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
               <span class="n">writefrequency</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">modeltop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">stratosphere</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
               <span class="n">tropopause</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">timestep</span><span class="o">=</span><span class="mf">45.0</span><span class="p">,</span><span class="n">runscript</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">columnmode</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
               <span class="n">highcadence</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;toggle&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;start&quot;</span><span class="p">:</span><span class="mi">320</span><span class="p">,</span><span class="s2">&quot;end&quot;</span><span class="p">:</span><span class="mi">576</span><span class="p">,</span><span class="s2">&quot;interval&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p">},</span>
               <span class="n">snapshots</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">resources</span><span class="o">=</span><span class="p">[],</span><span class="n">landmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">stormclim</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nstorms</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
               <span class="n">stormcapture</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;VITHRESH&quot;</span><span class="p">:</span><span class="mf">0.145</span><span class="p">,</span><span class="s2">&quot;GPITHRESH&quot;</span><span class="p">:</span><span class="mf">0.37</span><span class="p">,</span><span class="s2">&quot;VMXTHRESH&quot;</span><span class="p">:</span><span class="mf">33.0</span><span class="p">,</span>
                             <span class="s2">&quot;LAVTHRESH&quot;</span><span class="p">:</span><span class="mf">1.2e-5</span><span class="p">,</span><span class="s2">&quot;VRMTHRESH&quot;</span><span class="p">:</span><span class="mf">0.577</span><span class="p">,</span><span class="s2">&quot;MINSURFTEMP&quot;</span><span class="p">:</span><span class="mf">298.15</span><span class="p">,</span>
                             <span class="s2">&quot;MAXSURFTEMP&quot;</span><span class="p">:</span><span class="mf">373.15</span><span class="p">,</span><span class="s2">&quot;WINDTHRESH&quot;</span><span class="p">:</span><span class="mf">33.0</span><span class="p">,</span><span class="s2">&quot;SWINDTHRESH&quot;</span><span class="p">:</span><span class="mf">20.5</span><span class="p">,</span>
                             <span class="s2">&quot;SIZETHRESH&quot;</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="s2">&quot;ENDTHRESH&quot;</span><span class="p">:</span><span class="mi">16</span><span class="p">,</span><span class="s2">&quot;MINSTORMLEN&quot;</span><span class="p">:</span><span class="mi">256</span><span class="p">,</span>
                             <span class="s2">&quot;MAXSTORMLEN&quot;</span><span class="p">:</span><span class="mi">1024</span><span class="p">,</span><span class="s2">&quot;NKTRIGGER&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s2">&quot;toggle&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
               <span class="n">topomap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">otherargs</span><span class="o">=</span><span class="p">{}):</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NOUTPUT&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">noutput</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noutput</span> <span class="o">=</span> <span class="n">noutput</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;GSOL0&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">flux</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flux</span> <span class="o">=</span> <span class="n">flux</span>
        <span class="k">if</span> <span class="n">startemp</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTARTEMP&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;STARBBTEMP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">startemp</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startemp</span> <span class="o">=</span> <span class="n">startemp</span>
        <span class="k">if</span> <span class="n">starspec</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTARFILE&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;STARFILE&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="o">%</span><span class="n">starspec</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;STARFILEHR&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">_hr.dat&#39;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">starspec</span><span class="p">)[:</span><span class="o">-</span><span class="mi">4</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">starspec</span> <span class="o">=</span> <span class="n">starspec</span>
        
        <span class="k">if</span> <span class="n">pH2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pH2&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">pH2</span>
        <span class="k">if</span> <span class="n">pHe</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pHe&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">pHe</span>
        <span class="k">if</span> <span class="n">pN2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pN2&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">pN2</span>
        <span class="k">if</span> <span class="n">pO2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pO2&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">pO2</span>
        <span class="k">if</span> <span class="n">pCO2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pCO2&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">pCO2</span>
        <span class="k">if</span> <span class="n">pAr</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pAr&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">pAr</span>
        <span class="k">if</span> <span class="n">pNe</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pNe&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">pNe</span>
        <span class="k">if</span> <span class="n">pKr</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pKr&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">pKr</span>
        <span class="k">if</span> <span class="n">pH2O</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pH2O&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">pH2O</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pressure</span><span class="p">:</span>
                <span class="c1">#self.pgases=gases_default</span>
                <span class="c1">#self.pressure=0.0</span>
                <span class="c1">#for gas in self.pgases:</span>
                    <span class="c1">#self.pressure+=self.pgases[gas] #in bars</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span> <span class="o">=</span> <span class="mf">1.011</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span> <span class="o">=</span> <span class="n">pressure</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">for</span> <span class="n">gas</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="n">gas</span><span class="p">]</span>
        
        <span class="n">gasesvx</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">gas</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">:</span>
            <span class="n">gasesvx</span><span class="p">[</span><span class="n">gas</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="n">gas</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">pressure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">gas</span> <span class="ow">in</span> <span class="n">gasesvx</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span> <span class="o">+=</span> <span class="n">gasesvx</span><span class="p">[</span><span class="n">gas</span><span class="p">]</span><span class="o">*</span><span class="n">smws</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="o">+</span><span class="n">gas</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span> <span class="o">=</span> <span class="mf">28.970253</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gascon</span> <span class="o">=</span> <span class="mf">8314.46261815324</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span>
        
        <span class="k">if</span> <span class="n">gascon</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gascon</span><span class="o">=</span><span class="n">gascon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span> <span class="o">=</span> <span class="mf">8314.46261815324</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">gascon</span>
        
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean Molecular Weight set to </span><span class="si">%1.4f</span><span class="s1"> g/mol&#39;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">mmw</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">pressure</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pressure</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="p">:</span>  <span class="c1">#User has specified a different pressure than sum of gas pressures</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span> <span class="o">=</span> <span class="n">pressure</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">CO2ppmv</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">if</span> <span class="s1">&#39;pCO2&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">CO2ppmv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s1">&#39;pCO2&#39;</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">pressure</span> <span class="o">*</span> <span class="mf">1.0e6</span> <span class="c1">#ppmv</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;CO2&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">CO2ppmv</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PSURF&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">*</span><span class="mf">1.0e5</span><span class="p">))</span> <span class="c1">#Pa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;GASCON&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gascon</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NPBROADEN&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">pressurebroaden</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressurebroaden</span><span class="o">=</span><span class="n">pressurebroaden</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NEQSIG&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">vtype</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vtype</span><span class="o">=</span><span class="n">vtype</span>
        <span class="k">if</span> <span class="n">rotationperiod</span><span class="o">!=</span><span class="mf">1.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ROTSPD&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">rotationperiod</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;N_DAYS_PER_YEAR&quot;</span><span class="p">,</span>
                                <span class="nb">str</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mf">360.0</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="n">rotationperiod</span><span class="p">)</span><span class="o">/</span><span class="mi">12</span><span class="o">+</span><span class="mf">0.5</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">12</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rotationperiod</span><span class="o">=</span><span class="n">rotationperiod</span>
        <span class="k">if</span> <span class="n">synchronous</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFIXED&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;FIXEDLON&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">substellarlon</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">synchronous</span><span class="o">=</span><span class="n">synchronous</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">substellarlon</span><span class="o">=</span><span class="n">substellarlon</span>
        
        <span class="k">if</span> <span class="n">restartfile</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">/plasim_restart&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">restartfile</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/plasim_restart&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">restartfile</span><span class="o">=</span><span class="n">restartfile</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;GA&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">gravity</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_postnamelist</span><span class="p">(</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,</span><span class="s2">&quot;gravity&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">gravity</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_postnamelist</span><span class="p">(</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,</span><span class="s2">&quot;gravity&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">gravity</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gravity</span><span class="o">=</span><span class="n">gravity</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PLARAD&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="o">*</span><span class="mf">6371220.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_postnamelist</span><span class="p">(</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,</span><span class="s2">&quot;radius&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="o">*</span><span class="mf">6371220.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_postnamelist</span><span class="p">(</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,</span><span class="s2">&quot;radius&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">radius</span><span class="o">*</span><span class="mf">6371220.0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">=</span><span class="n">radius</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">eccentricity</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ECCEN&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">eccentricity</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eccentricity</span><span class="o">=</span><span class="n">eccentricity</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">obliquity</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;OBLIQ&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">obliquity</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">obliquity</span><span class="o">=</span><span class="n">obliquity</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">lonvernaleq</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;MVELP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">lonvernaleq</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lonvernaleq</span><span class="o">=</span><span class="n">lonvernaleq</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFIXORB&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">fixedorbit</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fixedorbit</span><span class="o">=</span><span class="n">fixedorbit</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">orography</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;OROSCALE&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">orography</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;glacier_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NGLACIER&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">orography</span><span class="o">=</span><span class="n">orography</span>
                
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NRADICE&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">seaice</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seaice</span><span class="o">=</span><span class="n">seaice</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NCARBON&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">co2weathering</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NCO2EVOLVE&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">evolveco2</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">co2weathering</span><span class="o">=</span><span class="n">co2weathering</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">evolveco2</span><span class="o">=</span><span class="n">evolveco2</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">erosionsupplylimit</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSUPPLY&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;WMAX&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">erosionsupplylimit</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">erosionsupplylimit</span><span class="o">=</span><span class="n">erosionsupplylimit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;VOLCANCO2&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">outgassing</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">outgassing</span><span class="o">=</span><span class="n">outgassing</span>
        
        <span class="k">if</span> <span class="n">physicsfilter</span><span class="p">:</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="n">physicsfilter</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;gp&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NGPTFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;sp&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSPVFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;none&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;cesaro&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;exp&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;lh&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">physicsfilter</span><span class="o">=</span><span class="n">physicsfilter</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;FILTERKAPPA&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">filterkappa</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterkappa</span><span class="o">=</span><span class="n">filterkappa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTEREXP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">filterpower</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterpower</span><span class="o">=</span><span class="n">filterpower</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;LANDHOSKN0&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">filterLHN0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterLHN0</span><span class="o">=</span><span class="n">filterLHN0</span>
        <span class="k">if</span> <span class="n">diffusionwaven</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NHDIFF&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">diffusionwaven</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diffusionwaven</span><span class="o">=</span><span class="n">diffusionwaven</span>
        <span class="k">if</span> <span class="n">qdiffusion</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISSQ&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span><span class="n">qdiffusion</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qdiffusion</span><span class="o">=</span><span class="n">qdiffusion</span>
        <span class="k">if</span> <span class="n">tdiffusion</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISST&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span><span class="n">tdiffusion</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tdiffusion</span><span class="o">=</span><span class="n">tdiffusion</span>
        <span class="k">if</span> <span class="n">zdiffusion</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISSZ&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span><span class="n">zdiffusion</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zdiffusion</span><span class="o">=</span><span class="n">zdiffusion</span>
        <span class="k">if</span> <span class="n">ddiffusion</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISSD&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span><span class="n">ddiffusion</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ddiffusion</span><span class="o">=</span><span class="n">ddiffusion</span>
        <span class="k">if</span> <span class="n">diffusionpower</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NDEL&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span><span class="n">diffusionpower</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">diffusionpower</span><span class="o">=</span><span class="n">diffusionpower</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">snowicealbedo</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="n">alb</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">snowicealbedo</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ALBICE&quot;</span><span class="p">,</span><span class="n">alb</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DICEALBMN&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DICEALBMX&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSNOWALBMN&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSNOWALBMN&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DGLACALBMN&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSNOWALB&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snowicealbedo</span><span class="o">=</span><span class="n">snowicealbedo</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSIMPLEALBEDO&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">((</span><span class="ow">not</span> <span class="n">twobandalbedo</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">twobandalbedo</span><span class="o">=</span><span class="n">twobandalbedo</span>
        
        <span class="k">if</span> <span class="n">maxsnow</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSMAX&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">maxsnow</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxsnow</span><span class="o">=</span><span class="n">maxsnow</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">soilalbedo</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="n">alb</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">soilalbedo</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*0174.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ALBLAND&quot;</span><span class="p">,</span><span class="n">alb</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DGROUNDALB&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soilalbedo</span><span class="o">=</span><span class="n">soilalbedo</span>
        
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">oceanalbedo</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="n">alb</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">oceanalbedo</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ALBSEA&quot;</span><span class="p">,</span><span class="n">alb</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DOCEANALB&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oceanalbedo</span><span class="o">=</span><span class="n">oceanalbedo</span>
        
        <span class="k">if</span> <span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;lambertian&quot;</span> <span class="ow">or</span> <span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;Lambertian&quot;</span> <span class="ow">or</span> <span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;uniform&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM6&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;default&quot;</span> <span class="ow">or</span> <span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;plasim&quot;</span> <span class="ow">or</span> <span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;ECHAM-3&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM6&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;ECHAM-6&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM6&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="o">=</span><span class="n">oceanzenith</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWETSOIL&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">wetsoil</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wetsoil</span><span class="o">=</span><span class="n">wetsoil</span>
        <span class="k">if</span> <span class="n">soilwatercap</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;WSMAX&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">soilwatercap</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*0229.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">desertplanet</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NDESERT&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWATCINI&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DWATCINI&quot;</span><span class="p">,</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">soilsaturation</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWATCINI&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DWATCINI&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">soilsaturation</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*0229.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">aquaplanet</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NAQUA&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soilwatercap</span><span class="o">=</span><span class="n">soilwatercap</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soilsaturation</span><span class="o">=</span><span class="n">soilsaturation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desertplanet</span><span class="o">=</span><span class="n">desertplanet</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aquaplanet</span><span class="o">=</span><span class="n">aquaplanet</span>
        
        <span class="k">if</span> <span class="n">drycore</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;fluxmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NEVAP&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drycore</span><span class="o">=</span><span class="n">drycore</span>
        
        <span class="k">if</span> <span class="n">columnmode</span><span class="p">:</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">columnmode</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;static&quot;</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NADV&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;clear&quot;</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NCLOUDS&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ACLLWR&quot;</span><span class="p">,</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">columnmode</span><span class="o">=</span><span class="n">columnmode</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NO3&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">ozone</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ozone</span><span class="o">=</span><span class="n">ozone</span>
        
        <span class="k">if</span> <span class="n">cpsoil</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;SOILCAP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">cpsoil</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cpsoil</span> <span class="o">=</span> <span class="n">cpsoil</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">dzsoils</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mf">6.4</span><span class="p">])</span><span class="o">*</span><span class="n">soildepth</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSOILZ&quot;</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dzsoils</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">soildepth</span><span class="o">=</span><span class="n">soildepth</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;oceanmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;MLDEPTH&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">mldepth</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mldepth</span><span class="o">=</span><span class="n">mldepth</span>
        
        <span class="k">if</span> <span class="n">writefrequency</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWPD&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">writefrequency</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writefrequency</span><span class="o">=</span><span class="n">writefrequency</span>
        
        <span class="k">if</span> <span class="n">stratosphere</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NEQSIG&quot;</span><span class="p">,</span><span class="s2">&quot;5&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">modeltop</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PTOP2&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">modeltop</span><span class="o">*</span><span class="mf">100.0</span><span class="p">))</span> <span class="c1">#convert hPa-&gt;Pa</span>
            <span class="k">if</span> <span class="n">tropopause</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PTOP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">tropopause</span><span class="o">*</span><span class="mf">100.0</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">modeltop</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PTOP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">modeltop</span><span class="o">*</span><span class="mf">100.0</span><span class="p">))</span> <span class="c1">#convert hPa-&gt;Pa</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stratosphere</span><span class="o">=</span><span class="n">stratosphere</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modeltop</span><span class="o">=</span><span class="n">modeltop</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tropopause</span><span class="o">=</span><span class="n">tropopause</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;MPSTEP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">timestep</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTPW&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">7200</span><span class="o">//</span><span class="nb">int</span><span class="p">(</span><span class="n">timestep</span><span class="p">))))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timestep</span><span class="o">=</span><span class="n">timestep</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">runscript</span><span class="o">=</span><span class="n">runscript</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NHCADENCE&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;HCSTARTSTEP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;HCENDSTEP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;HCINTERVAL&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;interval&quot;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="o">=</span><span class="n">highcadence</span>
        
        <span class="k">if</span> <span class="n">snapshots</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSNAPSHOT&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTPS&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">snapshots</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapshots</span><span class="o">=</span><span class="n">snapshots</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">resources</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">resources</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">/&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="o">=</span><span class="n">resources</span>
        
        <span class="k">if</span> <span class="n">landmap</span> <span class="ow">or</span> <span class="n">topomap</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">landmap</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">/N</span><span class="si">%03d</span><span class="s2">_surf_0172.sra&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">landmap</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">topomap</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">/N</span><span class="si">%03d</span><span class="s2">_surf_0129.sra&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">topomap</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">landmap</span><span class="o">=</span><span class="n">landmap</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topomap</span><span class="o">=</span><span class="n">topomap</span>
        
        <span class="k">if</span> <span class="n">stormclim</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTORMDIAG&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_postcodes</span><span class="p">(</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,[</span><span class="mi">322</span><span class="p">,</span><span class="mi">323</span><span class="p">,</span><span class="mi">324</span><span class="p">,</span><span class="mi">325</span><span class="p">,</span><span class="mi">326</span><span class="p">,</span><span class="mi">327</span><span class="p">,</span><span class="mi">328</span><span class="p">,</span><span class="mi">329</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_add_postcodes</span><span class="p">(</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,[</span><span class="mi">322</span><span class="p">,</span><span class="mi">323</span><span class="p">,</span><span class="mi">324</span><span class="p">,</span><span class="mi">325</span><span class="p">,</span><span class="mi">326</span><span class="p">,</span><span class="mi">327</span><span class="p">,</span><span class="mi">328</span><span class="p">,</span><span class="mi">329</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stormclim</span><span class="o">=</span><span class="n">stormclim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTORMS&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">nstorms</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nstorms</span><span class="o">=</span><span class="n">nstorms</span>
        <span class="k">if</span> <span class="n">stormcapture</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;HC_CAPTURE&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">stormcapture</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">param</span><span class="o">!=</span><span class="s2">&quot;toggle&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="n">param</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">stormcapture</span><span class="p">[</span><span class="n">param</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stormcapture</span><span class="o">=</span><span class="n">stormcapture</span>
        
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">otherargs</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">otherargs</span><span class="p">:</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">)</span>
                <span class="n">destination</span><span class="o">=</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)</span>
                <span class="n">value</span><span class="o">=</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">field</span><span class="o">=</span><span class="n">destination</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">namelist</span><span class="o">=</span><span class="n">destination</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="n">namelist</span><span class="p">,</span><span class="n">field</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">otherargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>
     
<div class="viewcode-block" id="Model.loadconfig"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.loadconfig">[docs]</a>    <span class="k">def</span> <span class="nf">loadconfig</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">configfile</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">configfile</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cfgf</span><span class="p">:</span>
            <span class="n">cfg</span> <span class="o">=</span> <span class="n">cfgf</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">noutput</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">flux</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">startemp</span><span class="o">=</span><span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">starspec</span><span class="o">=</span><span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">gases</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">gas</span> <span class="ow">in</span> <span class="n">gases</span><span class="p">:</span>
            <span class="n">species</span> <span class="o">=</span> <span class="n">gas</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
            <span class="n">amt</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">species</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">species</span> <span class="o">=</span> <span class="n">species</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="n">species</span><span class="p">]</span> <span class="o">=</span> <span class="n">amt</span>
        <span class="n">gascon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
        <span class="n">pressure</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">pressurebroaden</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">7</span><span class="p">]))</span>
        <span class="n">vtype</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
        <span class="n">rotationperiod</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
        <span class="n">synchronous</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">10</span><span class="p">]))</span>
        <span class="n">substellarlon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">11</span><span class="p">])</span>
        <span class="n">restartfile</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">gravity</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">13</span><span class="p">])</span>
        <span class="n">radius</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">14</span><span class="p">])</span>
        <span class="n">eccentricity</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">15</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">obliquity</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">16</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">lonvernaleq</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">17</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">fixedorbit</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">18</span><span class="p">]))</span>
        <span class="n">orography</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">19</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">seaice</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">20</span><span class="p">]))</span>
        <span class="n">co2weathering</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">21</span><span class="p">]))</span>
        <span class="n">evolveco2</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">22</span><span class="p">]))</span>
        <span class="n">physicsfilter</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">23</span><span class="p">],</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">filterkappa</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">24</span><span class="p">])</span>
        <span class="n">filterpower</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">25</span><span class="p">])</span>
        <span class="n">filterLHN0</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">26</span><span class="p">])</span>
        <span class="n">diffusionwaven</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">27</span><span class="p">],</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">qdiffusion</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">28</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">tdiffusion</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">29</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">zdiffusion</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">30</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">ddiffusion</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">31</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">diffusionpower</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">32</span><span class="p">],</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">erosionsupplylimit</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">33</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">outgassing</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">34</span><span class="p">])</span>
        <span class="n">snowicealbedo</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">35</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">twobandalbedo</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">36</span><span class="p">]))</span>
        <span class="n">maxsnow</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">37</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">soilalbedo</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">38</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">oceanalbedo</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">39</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">oceanzenith</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="mi">40</span><span class="p">]</span>
        <span class="n">wetsoil</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">41</span><span class="p">]))</span>
        <span class="n">soilwatercap</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">42</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">aquaplanet</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">43</span><span class="p">]))</span>
        <span class="n">desertplanet</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">44</span><span class="p">]))</span>
        <span class="n">soilsaturation</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">45</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">drycore</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">46</span><span class="p">]))</span>
        <span class="n">ozone</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">47</span><span class="p">]))</span>
        <span class="n">cpsoil</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">48</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">soildepth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">49</span><span class="p">])</span>
        <span class="n">mldepth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">50</span><span class="p">])</span>
        <span class="n">writefrequency</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">51</span><span class="p">],</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">modeltop</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">52</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">stratosphere</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">53</span><span class="p">]))</span>
        <span class="n">tropopause</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">54</span><span class="p">],</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">timestep</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">55</span><span class="p">])</span>
        <span class="n">runscript</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">56</span><span class="p">],</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">columnmode</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">57</span><span class="p">],</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">hcdict</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="mi">58</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">)</span>
        <span class="n">highcadence</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">hc</span> <span class="ow">in</span> <span class="n">hcdict</span><span class="p">:</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">hc</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
            <span class="n">highcadence</span><span class="p">[</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">snapshots</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">59</span><span class="p">],</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">resources</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">reslist</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="mi">60</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">reslist</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">reslist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">reslist</span><span class="p">:</span>
                <span class="n">resources</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="n">landmap</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">61</span><span class="p">],</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">topomap</span> <span class="o">=</span> <span class="n">noneparse</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">62</span><span class="p">],</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">stormclim</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">63</span><span class="p">]))</span>
        <span class="n">nstorms</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">cfg</span><span class="p">[</span><span class="mi">64</span><span class="p">])</span>
        <span class="n">stormcapture</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">stormdict</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="mi">65</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stormdict</span><span class="p">:</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;toggle&quot;</span> <span class="ow">or</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;NKTRIGGER&quot;</span> <span class="ow">or</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;SIZETHRESH&quot;</span> \
             <span class="ow">or</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;ENDTHRESH&quot;</span> <span class="ow">or</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;MINSTORMLEN&quot;</span> <span class="ow">or</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;MAXSTORMLEN&quot;</span><span class="p">:</span>
                <span class="n">stormcapture</span><span class="p">[</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stormcapture</span><span class="p">[</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">otherargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">otherdict</span> <span class="o">=</span> <span class="n">cfg</span><span class="p">[</span><span class="mi">66</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">otherdict</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span> <span class="ow">or</span> <span class="n">otherdict</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">otherdict</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">otherdict</span><span class="p">:</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;~&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;f&quot;</span><span class="p">:</span>
                    <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span>
                <span class="k">elif</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;i&quot;</span><span class="p">:</span>
                    <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span>
                <span class="k">elif</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;s&quot;</span><span class="p">:</span>
                    <span class="n">dtype</span><span class="o">=</span><span class="nb">str</span>
                <span class="n">parts</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
                <span class="n">otherargs</span><span class="p">[</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">dtype</span><span class="p">(</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">noutput</span><span class="o">=</span><span class="n">noutput</span><span class="p">,</span><span class="n">flux</span><span class="o">=</span><span class="n">flux</span><span class="p">,</span><span class="n">startemp</span><span class="o">=</span><span class="n">startemp</span><span class="p">,</span><span class="n">starspec</span><span class="o">=</span><span class="n">starspec</span><span class="p">,</span>
                       <span class="n">gascon</span><span class="o">=</span><span class="n">gascon</span><span class="p">,</span><span class="n">pressure</span><span class="o">=</span><span class="n">pressure</span><span class="p">,</span><span class="n">pressurebroaden</span><span class="o">=</span><span class="n">pressurebroaden</span><span class="p">,</span>
                       <span class="n">vtype</span><span class="o">=</span><span class="n">vtype</span><span class="p">,</span><span class="n">rotationperiod</span><span class="o">=</span><span class="n">rotationperiod</span><span class="p">,</span><span class="n">synchronous</span><span class="o">=</span><span class="n">synchronous</span><span class="p">,</span>
                       <span class="n">substellarlon</span><span class="o">=</span><span class="n">substellarlon</span><span class="p">,</span><span class="n">restartfile</span><span class="o">=</span><span class="n">restartfile</span><span class="p">,</span><span class="n">gravity</span><span class="o">=</span><span class="n">gravity</span><span class="p">,</span>
                       <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span><span class="n">eccentricity</span><span class="o">=</span><span class="n">eccentricity</span><span class="p">,</span><span class="n">obliquity</span><span class="o">=</span><span class="n">obliquity</span><span class="p">,</span>
                       <span class="n">lonvernaleq</span><span class="o">=</span><span class="n">lonvernaleq</span><span class="p">,</span><span class="n">fixedorbit</span><span class="o">=</span><span class="n">fixedorbit</span><span class="p">,</span><span class="n">orography</span><span class="o">=</span><span class="n">orography</span><span class="p">,</span>
                       <span class="n">seaice</span><span class="o">=</span><span class="n">seaice</span><span class="p">,</span><span class="n">co2weathering</span><span class="o">=</span><span class="n">co2weathering</span><span class="p">,</span><span class="n">evolveco2</span><span class="o">=</span><span class="n">evolveco2</span><span class="p">,</span>
                       <span class="n">physicsfilter</span><span class="o">=</span><span class="n">physicsfilter</span><span class="p">,</span><span class="n">filterkappa</span><span class="o">=</span><span class="n">filterkappa</span><span class="p">,</span>
                       <span class="n">filterpower</span><span class="o">=</span><span class="n">filterpower</span><span class="p">,</span><span class="n">filterLHN0</span><span class="o">=</span><span class="n">filterLHN0</span><span class="p">,</span><span class="n">diffusionwaven</span><span class="o">=</span><span class="n">diffusionwaven</span><span class="p">,</span>
                       <span class="n">qdiffusion</span><span class="o">=</span><span class="n">qdiffusion</span><span class="p">,</span><span class="n">tdiffusion</span><span class="o">=</span><span class="n">tdiffusion</span><span class="p">,</span><span class="n">zdiffusion</span><span class="o">=</span><span class="n">zdiffusion</span><span class="p">,</span>
                       <span class="n">ddiffusion</span><span class="o">=</span><span class="n">ddiffusion</span><span class="p">,</span><span class="n">diffusionpower</span><span class="o">=</span><span class="n">diffusionpower</span><span class="p">,</span>
                       <span class="n">erosionsupplylimit</span><span class="o">=</span><span class="n">erosionsupplylimit</span><span class="p">,</span><span class="n">outgassing</span><span class="o">=</span><span class="n">outgassing</span><span class="p">,</span>
                       <span class="n">snowicealbedo</span><span class="o">=</span><span class="n">snowicealbedo</span><span class="p">,</span><span class="n">twobandalbedo</span><span class="o">=</span><span class="n">twobandalbedo</span><span class="p">,</span><span class="n">maxsnow</span><span class="o">=</span><span class="n">maxsnow</span><span class="p">,</span>
                       <span class="n">soilalbedo</span><span class="o">=</span><span class="n">soilalbedo</span><span class="p">,</span><span class="n">oceanalbedo</span><span class="o">=</span><span class="n">oceanalbedo</span><span class="p">,</span><span class="n">oceanzenith</span><span class="o">=</span><span class="n">oceanzenith</span><span class="p">,</span>
                       <span class="n">wetsoil</span><span class="o">=</span><span class="n">wetsoil</span><span class="p">,</span><span class="n">soilwatercap</span><span class="o">=</span><span class="n">soilwatercap</span><span class="p">,</span><span class="n">aquaplanet</span><span class="o">=</span><span class="n">aquaplanet</span><span class="p">,</span>
                       <span class="n">desertplanet</span><span class="o">=</span><span class="n">desertplanet</span><span class="p">,</span><span class="n">soilsaturation</span><span class="o">=</span><span class="n">soilsaturation</span><span class="p">,</span>
                       <span class="n">drycore</span><span class="o">=</span><span class="n">drycore</span><span class="p">,</span><span class="n">ozone</span><span class="o">=</span><span class="n">ozone</span><span class="p">,</span><span class="n">cpsoil</span><span class="o">=</span><span class="n">cpsoil</span><span class="p">,</span><span class="n">soildepth</span><span class="o">=</span><span class="n">soildepth</span><span class="p">,</span>
                       <span class="n">mldepth</span><span class="o">=</span><span class="n">mldepth</span><span class="p">,</span><span class="n">writefrequency</span><span class="o">=</span><span class="n">writefrequency</span><span class="p">,</span><span class="n">modeltop</span><span class="o">=</span><span class="n">modeltop</span><span class="p">,</span>
                       <span class="n">stratosphere</span><span class="o">=</span><span class="n">stratosphere</span><span class="p">,</span><span class="n">tropopause</span><span class="o">=</span><span class="n">tropopause</span><span class="p">,</span><span class="n">timestep</span><span class="o">=</span><span class="n">timestep</span><span class="p">,</span>
                       <span class="n">runscript</span><span class="o">=</span><span class="n">runscript</span><span class="p">,</span><span class="n">columnmode</span><span class="o">=</span><span class="n">columnmode</span><span class="p">,</span><span class="n">highcadence</span><span class="o">=</span><span class="n">highcadence</span><span class="p">,</span>
                       <span class="n">snapshots</span><span class="o">=</span><span class="n">snapshots</span><span class="p">,</span><span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span><span class="n">landmap</span><span class="o">=</span><span class="n">landmap</span><span class="p">,</span><span class="n">stormclim</span><span class="o">=</span><span class="n">stormclim</span><span class="p">,</span>
                       <span class="n">nstorms</span><span class="o">=</span><span class="n">nstorms</span><span class="p">,</span><span class="n">stormcapture</span><span class="o">=</span><span class="n">stormcapture</span><span class="p">,</span><span class="n">topomap</span><span class="o">=</span><span class="n">topomap</span><span class="p">,</span>
                       <span class="n">otherargs</span><span class="o">=</span><span class="n">otherargs</span><span class="p">)</span>       </div>
    
<div class="viewcode-block" id="Model.modify"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.modify">[docs]</a>    <span class="k">def</span> <span class="nf">modify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">setgas</span><span class="o">=</span><span class="kc">False</span>
        <span class="n">setgascon</span><span class="o">=</span><span class="kc">False</span>
        <span class="n">changeatmo</span><span class="o">=</span><span class="kc">False</span>
        <span class="n">changeland</span><span class="o">=</span><span class="kc">False</span>
        <span class="n">oldpressure</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">gas</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">:</span>
            <span class="n">oldpressure</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="n">gas</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;noutput&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NOUTPUT&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">noutput</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;flux&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;GSOL0&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">flux</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;startemp&quot;</span><span class="p">:</span>
                <span class="n">startemp</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">startemp</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTARTEMP&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;STARBBTEMP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">startemp</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">startemp</span> <span class="o">=</span> <span class="n">startemp</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;starspec&quot;</span><span class="p">:</span>
                <span class="n">starspec</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">starspec</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTARFILE&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;STARFILE&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span><span class="o">%</span><span class="n">starspec</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;STARFILEHR&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;</span><span class="si">%s</span><span class="s2">_hr.dat&#39;&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">starspec</span><span class="p">)[:</span><span class="o">-</span><span class="mi">4</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">starspec</span> <span class="o">=</span> <span class="n">starspec</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pH2&quot;</span><span class="p">:</span>
                <span class="n">setgas</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pH2&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pH2&quot;</span><span class="p">]</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pHe&quot;</span><span class="p">:</span>
                <span class="n">setgas</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pHe&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pHe&quot;</span><span class="p">]</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pN2&quot;</span><span class="p">:</span>
                <span class="n">setgas</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pN2&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pN2&quot;</span><span class="p">]</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pO2&quot;</span><span class="p">:</span>
                <span class="n">setgas</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pO2&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pO2&quot;</span><span class="p">]</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pCO2&quot;</span><span class="p">:</span>
                <span class="n">setgas</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pCO2&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pCO2&quot;</span><span class="p">]</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pAr&quot;</span><span class="p">:</span>
                <span class="n">setgas</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pAr&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pAr&quot;</span><span class="p">]</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pNe&quot;</span><span class="p">:</span>
                <span class="n">setgas</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pNe&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pNe&quot;</span><span class="p">]</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pKr&quot;</span><span class="p">:</span>
                <span class="n">setgas</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pKr&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pKr&quot;</span><span class="p">]</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pH20&quot;</span><span class="p">:</span>
                <span class="n">setgas</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pH2O&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s2">&quot;pH2O&quot;</span><span class="p">]</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pressure&quot;</span><span class="p">:</span>
                <span class="n">pressure</span><span class="o">=</span><span class="n">value</span>
                <span class="n">setpressure</span><span class="o">=</span><span class="kc">True</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;gascon&quot;</span><span class="p">:</span>
                <span class="n">setgascon</span><span class="o">=</span><span class="kc">True</span>
                <span class="n">gascon</span><span class="o">=</span><span class="n">value</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;pressurebroaden&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pressurebroaden</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NPBROADEN&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pressurebroaden</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;vtype&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">vtype</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NEQSIG&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vtype</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;rotationperiod&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rotationperiod</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotationperiod</span><span class="o">!=</span><span class="mf">1.0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ROTSPD&quot;</span><span class="p">,</span>
                                        <span class="nb">str</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rotationperiod</span><span class="p">)))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;N_DAYS_PER_YEAR&quot;</span><span class="p">,</span>
                                        <span class="nb">str</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mf">360.0</span><span class="o">/</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rotationperiod</span><span class="p">)</span><span class="o">/</span><span class="mi">12</span><span class="o">+</span><span class="mf">0.5</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">12</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;synchronous&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">synchronous</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFIXED&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">synchronous</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;substellarlon&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">substellarlon</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;FIXEDLON&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">substellarlon</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;restartfile&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">restartfile</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">restartfile</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">/plasim_restart&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">restartfile</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/plasim_restart&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;gravity&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gravity</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;GA&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gravity</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_postnamelist</span><span class="p">(</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,</span><span class="s2">&quot;gravity&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gravity</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_postnamelist</span><span class="p">(</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,</span><span class="s2">&quot;gravity&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gravity</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;radius&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PLARAD&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">*</span><span class="mf">6371220.0</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_postnamelist</span><span class="p">(</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,</span><span class="s2">&quot;radius&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">*</span><span class="mf">6371220.0</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_postnamelist</span><span class="p">(</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,</span><span class="s2">&quot;radius&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">*</span><span class="mf">6371220.0</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;eccentricity&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">eccentricity</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ECCEN&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eccentricity</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;obliquity&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">obliquity</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;OBLIQ&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obliquity</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;lonvernaleq&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lonvernaleq</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;MVELP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lonvernaleq</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;fixedorbit&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fixedorbit</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFIXORB&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fixedorbit</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;orography&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">orography</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;OROSCALE&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orography</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;glacier_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NGLACIER&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">orography</span><span class="o">!=</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;seaice&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">seaice</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NRADICE&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seaice</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;co2weathering&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">co2weathering</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NCARBON&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">co2weathering</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;evolveco2&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">evolveco2</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NCO2EVOLVE&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evolveco2</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;erosionsupplylimit&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">erosionsupplylimit</span><span class="o">=</span><span class="n">value</span>
                <span class="n">flag</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">erosionsupplylimit</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSUPPLY&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">flag</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;WMAX&quot;</span><span class="p">,</span>
                                        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">erosionsupplylimit</span><span class="o">*</span><span class="n">flag</span><span class="o">+</span><span class="mf">1.0</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">flag</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;outgassing&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outgassing</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;carbonmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;VOLCANCO2&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outgassing</span><span class="p">))</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;physicsfilter&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">physicsfilter</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">physicsfilter</span><span class="p">:</span>
                    <span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">physicsfilter</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s2">&quot;gp&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NGPTFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s2">&quot;sp&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSPVFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s2">&quot;none&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s2">&quot;cesaro&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s2">&quot;exp&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;2&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s2">&quot;lh&quot;</span> <span class="ow">in</span> <span class="n">vals</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;3&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NGPTFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSPVFILTER&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;filterkappa&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">filterkappa</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;FILTERKAPPA&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterkappa</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;filterpower&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">filterpower</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NFILTEREXP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterpower</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;filterLHN0&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">filterLHN0</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;LANDHOSKN0&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterLHN0</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;diffusionwaven&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">diffusionwaven</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NHDIFF&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diffusionwaven</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NHDIFF&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;qdiffusion&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">qdiffusion</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISSQ&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span>
                                                                        <span class="bp">self</span><span class="o">.</span><span class="n">qdiffusion</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISSQ&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;tdiffusion&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tdiffusion</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISST&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span>
                                                                        <span class="bp">self</span><span class="o">.</span><span class="n">tdiffusion</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISST&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;zdiffusion&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">zdiffusion</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISSZ&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span>
                                                                        <span class="bp">self</span><span class="o">.</span><span class="n">zdiffusion</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISSZ&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;ddiffusion&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ddiffusion</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISSD&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%f</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span>
                                                                        <span class="bp">self</span><span class="o">.</span><span class="n">ddiffusion</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;TDISSD&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;diffusionpower&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">diffusionpower</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NDEL&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">*</span><span class="si">%d</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">,</span>
                                                                      <span class="bp">self</span><span class="o">.</span><span class="n">diffusionpower</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NDEL&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;snowicealbedo&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snowicealbedo</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snowicealbedo</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="n">alb</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snowicealbedo</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ALBICE&quot;</span><span class="p">,</span><span class="n">alb</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DICEALBMN&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DICEALBMX&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSNOWALBMN&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSNOWALBMN&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DGLACALBMN&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSNOWALB&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ALBICE&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DICEALBMN&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DICEALBMX&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSNOWALBMN&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSNOWALBMN&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DGLACALBMN&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSNOWALB&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;twobandalbedo&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">twobandalbedo</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSIMPLEALBEDO&quot;</span><span class="p">,</span>
                                    <span class="nb">str</span><span class="p">((</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">twobandalbedo</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;maxsnow&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">maxsnow</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="n">maxsnow</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSMAX&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxsnow</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSMAX&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;soilalbedo&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">soilalbedo</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soilalbedo</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="n">alb</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soilalbedo</span><span class="p">)</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*0174.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ALBLAND&quot;</span><span class="p">,</span><span class="n">alb</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DGROUNDALB&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ALBLAND&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DGROUNDALB&quot;</span><span class="p">)</span>
            
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;oceanalbedo&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">oceanalbedo</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oceanalbedo</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="n">alb</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oceanalbedo</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ALBSEA&quot;</span><span class="p">,</span><span class="n">alb</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DOCEANALB&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">,</span><span class="si">%s</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">alb</span><span class="p">,</span><span class="n">alb</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ALBSEA&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;seamod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DOCEANALB&quot;</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;oceanzenith&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;lambertian&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;Lambertian&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;uniform&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM6&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;default&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;plasim&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;ECHAM-3&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM6&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="o">==</span><span class="s2">&quot;ECHAM-6&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NECHAM6&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;wetsoil&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">wetsoil</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWETSOIL&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wetsoil</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;soilwatercap&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">soilwatercap</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">soilwatercap</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;WSMAX&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soilwatercap</span><span class="p">))</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*0229.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;WSMAX&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;soilsaturation&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">soilsaturation</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soilsaturation</span><span class="p">)</span><span class="o">!=</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWATCINI&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DWATCINI&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soilsaturation</span><span class="p">))</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*0229.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWATCINI&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DWATCINI&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;desertplanet&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">desertplanet</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">desertplanet</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NDESERT&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWATCINI&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DWATCINI&quot;</span><span class="p">,</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NDESERT&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWATCINI&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DWATCINI&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;aquaplanet&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">aquaplanet</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">aquaplanet</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NAQUA&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NAQUA&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;drycore&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">drycore</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;fluxmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NEVAP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">((</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">drycore</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;columnmode&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">columnmode</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">columnmode</span><span class="p">:</span>
                    <span class="n">parts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columnmode</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s2">&quot;static&quot;</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NADV&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NADV&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s2">&quot;clear&quot;</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NCLOUDS&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ACLLWR&quot;</span><span class="p">,</span><span class="s2">&quot;0.0&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NCLOUDS&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ACLLWR&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NADV&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NCLOUDS&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;ACLLWR&quot;</span><span class="p">)</span>
                    
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;ozone&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ozone</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NO3&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ozone</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;cpsoil&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cpsoil</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpsoil</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;SOILCAP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cpsoil</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;SOILCAP&quot;</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;soildepth&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">soildepth</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dzsoils</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">,</span> <span class="mf">3.2</span><span class="p">,</span> <span class="mf">6.4</span><span class="p">])</span><span class="o">*</span><span class="n">soildepth</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;landmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;DSOILZ&quot;</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dzsoils</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)))</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;mldepth&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mldepth</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;oceanmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;MLDEPTH&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mldepth</span><span class="p">))</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;writefrequency&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">writefrequency</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">writefrequency</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWPD&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">writefrequency</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NWPD&quot;</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;modeltop&quot;</span><span class="p">:</span>
                <span class="n">changeatmo</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">modeltop</span><span class="o">=</span><span class="n">value</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;stratosphere&quot;</span><span class="p">:</span>
                <span class="n">changeatmo</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stratosphere</span><span class="o">=</span><span class="n">value</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;tropopause&quot;</span><span class="p">:</span>
                <span class="n">changeatmo</span><span class="o">=</span><span class="kc">True</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tropopause</span><span class="o">=</span><span class="n">value</span>
             
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;timestep&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">timestep</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;MPSTEP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestep</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTPW&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">7200</span><span class="o">//</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestep</span><span class="p">))))</span>
            
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;runscript&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">runscript</span><span class="o">=</span><span class="n">value</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;highcadence&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NHCADENCE&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;HCSTARTSTEP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;start&quot;</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;HCENDSTEP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;end&quot;</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;HCINTERVAL&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="s2">&quot;interval&quot;</span><span class="p">]))</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;snapshots&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">snapshots</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapshots</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSNAPSHOT&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTPS&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapshots</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_namelist_param</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTPS&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSNAPSHOT&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;resources&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">:</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">/&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">))</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;landmap&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">landmap</span><span class="o">=</span><span class="n">value</span>
                <span class="n">changeland</span><span class="o">=</span><span class="kc">True</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;topomap&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">topomap</span><span class="o">=</span><span class="n">value</span>
                <span class="n">changeland</span><span class="o">=</span><span class="kc">True</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;stormclim&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stormclim</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stormclim</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTORMDIAG&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_add_postcodes</span><span class="p">(</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,[</span><span class="mi">322</span><span class="p">,</span><span class="mi">323</span><span class="p">,</span><span class="mi">324</span><span class="p">,</span><span class="mi">325</span><span class="p">,</span><span class="mi">326</span><span class="p">,</span><span class="mi">327</span><span class="p">,</span><span class="mi">328</span><span class="p">,</span><span class="mi">329</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_add_postcodes</span><span class="p">(</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,[</span><span class="mi">322</span><span class="p">,</span><span class="mi">323</span><span class="p">,</span><span class="mi">324</span><span class="p">,</span><span class="mi">325</span><span class="p">,</span><span class="mi">326</span><span class="p">,</span><span class="mi">327</span><span class="p">,</span><span class="mi">328</span><span class="p">,</span><span class="mi">329</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTORMDIAG&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_postcodes</span><span class="p">(</span><span class="s2">&quot;example.nl&quot;</span><span class="p">,[</span><span class="mi">322</span><span class="p">,</span><span class="mi">323</span><span class="p">,</span><span class="mi">324</span><span class="p">,</span><span class="mi">325</span><span class="p">,</span><span class="mi">326</span><span class="p">,</span><span class="mi">327</span><span class="p">,</span><span class="mi">328</span><span class="p">,</span><span class="mi">329</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_rm_postcodes</span><span class="p">(</span><span class="s2">&quot;snapshot.nl&quot;</span><span class="p">,[</span><span class="mi">322</span><span class="p">,</span><span class="mi">323</span><span class="p">,</span><span class="mi">324</span><span class="p">,</span><span class="mi">325</span><span class="p">,</span><span class="mi">326</span><span class="p">,</span><span class="mi">327</span><span class="p">,</span><span class="mi">328</span><span class="p">,</span><span class="mi">329</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;nstorms&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nstorms</span><span class="o">=</span><span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NSTORMS&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">int</span><span class="p">(</span><span class="n">nstorms</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;stormcapture&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stormcapture</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stormcapture</span><span class="p">[</span><span class="s2">&quot;toggle&quot;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;HC_CAPTURE&quot;</span><span class="p">,</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stormcapture</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">param</span><span class="o">!=</span><span class="s2">&quot;toggle&quot;</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="n">param</span><span class="p">,</span>
                                                <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stormcapture</span><span class="p">[</span><span class="n">param</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelsit</span><span class="p">(</span><span class="s2">&quot;hurricane_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;HC_CAPTURE&quot;</span><span class="p">,</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>
                
            <span class="k">if</span> <span class="n">key</span><span class="o">==</span><span class="s2">&quot;otherargs&quot;</span><span class="p">:</span>
                <span class="n">otherargs</span><span class="o">=</span><span class="n">value</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">otherargs</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">otherargs</span><span class="p">:</span>
                        <span class="n">parts</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;&lt;&quot;</span><span class="p">)</span>
                        <span class="n">destination</span><span class="o">=</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;@&quot;</span><span class="p">)</span>
                        <span class="n">value</span><span class="o">=</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">field</span><span class="o">=</span><span class="n">destination</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                        <span class="n">namelist</span><span class="o">=</span><span class="n">destination</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="n">namelist</span><span class="p">,</span><span class="n">field</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">otherargs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                
        <span class="k">if</span> <span class="n">setgas</span><span class="p">:</span>
            
            <span class="k">if</span> <span class="n">setpressure</span><span class="p">:</span>
                <span class="n">newpressure</span><span class="o">=</span><span class="n">pressure</span>
            
            <span class="n">pressure</span><span class="o">=</span><span class="mf">0.0</span>
            <span class="k">for</span> <span class="n">gas</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">:</span>
                <span class="n">pressure</span><span class="o">+=</span><span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="n">gas</span><span class="p">]</span>
            
            <span class="n">pscalef</span> <span class="o">=</span> <span class="n">pressure</span><span class="o">/</span><span class="n">oldpressure</span>
            
            <span class="n">gasesvx</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">gas</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">:</span>
                <span class="n">gasesvx</span><span class="p">[</span><span class="n">gas</span><span class="p">[</span><span class="mi">1</span><span class="p">:]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="n">gas</span><span class="p">]</span><span class="o">/</span><span class="n">pressure</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">gas</span> <span class="ow">in</span> <span class="n">gasesvx</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span> <span class="o">+=</span> <span class="n">gasesvx</span><span class="p">[</span><span class="n">gas</span><span class="p">]</span><span class="o">*</span><span class="n">smws</span><span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="o">+</span><span class="n">x</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gascon</span> <span class="o">=</span> <span class="mf">8314.46261815324</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span>
            
            <span class="k">if</span> <span class="n">setgascon</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gascon</span><span class="o">=</span><span class="n">gascon</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mmw</span> <span class="o">=</span> <span class="mf">8314.46261815324</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">gascon</span>
            
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Mean Molecular Weight set to </span><span class="si">%1.4f</span><span class="s1"> g/mol&#39;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">mmw</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">setpressure</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">=</span><span class="n">newpressure</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span> <span class="o">*=</span> <span class="n">pscalef</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Surface Pressure set to </span><span class="si">%1.6f</span><span class="s2"> bars&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PSURF&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;planet_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;GASCON&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gascon</span><span class="p">))</span>
            
                
            <span class="k">if</span> <span class="s1">&#39;pCO2&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">CO2ppmv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="s1">&#39;pCO2&#39;</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">pressure</span> <span class="o">*</span> <span class="mf">1.0e6</span> <span class="c1">#ppmv</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;radmod_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;CO2&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">CO2ppmv</span><span class="p">)</span>
        
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">setpressure</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="o">=</span><span class="n">pressure</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PSURF&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="p">))</span>
            
        <span class="k">if</span> <span class="n">changeatmo</span><span class="p">:</span>
               
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stratosphere</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;NEQSIG&quot;</span><span class="p">,</span><span class="s2">&quot;5&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeltop</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PTOP2&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modeltop</span><span class="o">*</span><span class="mf">100.0</span><span class="p">))</span> <span class="c1">#convert hPa-&gt;Pa</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tropopause</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PTOP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tropopause</span><span class="o">*</span><span class="mf">100.0</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modeltop</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_edit_namelist</span><span class="p">(</span><span class="s2">&quot;plasim_namelist&quot;</span><span class="p">,</span><span class="s2">&quot;PTOP&quot;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modeltop</span><span class="o">*</span><span class="mf">100.0</span><span class="p">))</span> <span class="c1">#convert hPa-&gt;Pa</span>
                    
        <span class="k">if</span> <span class="n">changeland</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">landmap</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">topomap</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;rm </span><span class="si">%s</span><span class="s2">/*.sra&quot;</span><span class="o">%</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">landmap</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">/N</span><span class="si">%03d</span><span class="s2">_surf_0172.sra&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">landmap</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">topomap</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s2">&quot;cp </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">/N</span><span class="si">%03d</span><span class="s2">_surf_0129.sra&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topomap</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">nlats</span><span class="p">))</span></div>
    
<div class="viewcode-block" id="Model.save"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="p">):</span>
        <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="bp">self</span><span class="p">,</span><span class="n">allow_pickle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>
        
<div class="viewcode-block" id="Model.exportcfg"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Model.exportcfg">[docs]</a>    <span class="k">def</span> <span class="nf">exportcfg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;export model configuration to a text file that can be used as configuration input&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modelname</span><span class="o">+</span><span class="s2">&quot;.cfg&quot;</span>
        <span class="n">cfg</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">noutput</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flux</span><span class="p">))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">startemp</span><span class="p">))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">starspec</span><span class="p">))</span><span class="c1">#=noneparse(cfg[3],str)</span>
        <span class="n">gases</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">gas</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">:</span>
            <span class="n">gases</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gas</span><span class="o">+</span><span class="s2">&quot;|&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pgases</span><span class="p">[</span><span class="n">gas</span><span class="p">]))</span>
        <span class="n">gases</span> <span class="o">=</span> <span class="s2">&quot;&amp;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">gases</span><span class="p">)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gases</span><span class="p">)</span><span class="c1"># = cfg[4].split(&quot;&amp;&quot;)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gascon</span><span class="p">))</span><span class="c1"># = float(cfg[5])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pressure</span><span class="p">))</span><span class="c1"># = float(cfg[6])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pressurebroaden</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[7]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vtype</span><span class="p">))</span><span class="c1"># = int(cfg[8])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rotationperiod</span><span class="p">))</span><span class="c1"># = float(cfg[9])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">synchronous</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[10]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">substellarlon</span><span class="p">))</span><span class="c1"># = float(cfg[11])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">restartfile</span><span class="p">))</span><span class="c1"># = noneparse(cfg[12],str)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gravity</span><span class="p">))</span><span class="c1"># = float(cfg[13])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">))</span><span class="c1"># = float(cfg[14])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eccentricity</span><span class="p">))</span><span class="c1"># = noneparse(cfg[15],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">obliquity</span><span class="p">))</span><span class="c1"># = noneparse(cfg[16],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lonvernaleq</span><span class="p">))</span><span class="c1"># = noneparse(cfg[17],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fixedorbit</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[18]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">orography</span><span class="p">))</span><span class="c1"># = noneparse(cfg[19],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seaice</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[20]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">co2weathering</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[21]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">evolveco2</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[22]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">physicsfilter</span><span class="p">))</span><span class="c1"># = noneparse(cfg[23],str)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterkappa</span><span class="p">))</span><span class="c1"># = float(cfg[24])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterpower</span><span class="p">))</span><span class="c1"># = int(cfg[25])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterLHN0</span><span class="p">))</span><span class="c1"># = float(cfg[26])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diffusionwaven</span><span class="p">))</span><span class="c1"># = noneparse(cfg[27],int)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qdiffusion</span><span class="p">))</span><span class="c1"># = noneparse(cfg[28],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tdiffusion</span><span class="p">))</span><span class="c1"># = noneparse(cfg[29],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zdiffusion</span><span class="p">))</span><span class="c1"># = noneparse(cfg[30],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ddiffusion</span><span class="p">))</span><span class="c1"># = noneparse(cfg[31],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">diffusionpower</span><span class="p">))</span><span class="c1"># = noneparse(cfg[32],int)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">erosionsupplylimit</span><span class="p">))</span><span class="c1"># = noneparse(cfg[33],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">outgassing</span><span class="p">))</span><span class="c1"># = float(cfg[34])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snowicealbedo</span><span class="p">))</span><span class="c1"># = noneparse(cfg[35],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">twobandalbedo</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[36]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">maxsnow</span><span class="p">))</span><span class="c1"># = noneparse(cfg[37],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soilalbedo</span><span class="p">))</span><span class="c1"># = noneparse(cfg[38],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oceanalbedo</span><span class="p">))</span><span class="c1"># = noneparse(cfg[39],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">oceanzenith</span><span class="p">))</span><span class="c1"># = cfg[40]</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wetsoil</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[41]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soilwatercap</span><span class="p">))</span><span class="c1"># = noneparse(cfg[42],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">aquaplanet</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[43]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">desertplanet</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[44]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soilsaturation</span><span class="p">))</span><span class="c1"># = noneparse(cfg[45],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">drycore</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[46]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ozone</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[47]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cpsoil</span><span class="p">))</span><span class="c1"># = noneparse(cfg[48],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">soildepth</span><span class="p">))</span><span class="c1"># = float(cfg[49])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mldepth</span><span class="p">))</span><span class="c1"># = float(cfg[50])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">writefrequency</span><span class="p">))</span><span class="c1"># = noneparse(cfg[51],int)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modeltop</span><span class="p">))</span><span class="c1"># = noneparse(cfg[52],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stratosphere</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[53]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tropopause</span><span class="p">))</span><span class="c1"># = noneparse(cfg[54],float)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestep</span><span class="p">))</span><span class="c1"># = float(cfg[55])</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">runscript</span><span class="p">))</span><span class="c1"># = noneparse(cfg[56],str)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">columnmode</span><span class="p">))</span><span class="c1"># = noneparse(cfg[57],str)</span>
        <span class="n">hcdict</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">hc</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">:</span>
            <span class="n">hcdict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hc</span><span class="o">+</span><span class="s2">&quot;|&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">highcadence</span><span class="p">[</span><span class="n">hc</span><span class="p">]))</span>
        <span class="n">hcdict</span> <span class="o">=</span> <span class="s2">&quot;&amp;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">hcdict</span><span class="p">)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">hcdict</span><span class="p">)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">snapshots</span><span class="p">))</span><span class="c1"># = noneparse(cfg[59],int)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resources</span><span class="p">))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">landmap</span><span class="p">))</span><span class="c1"># = noneparse(cfg[61],str)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topomap</span><span class="p">))</span><span class="c1"># = noneparse(cfg[62],str)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stormclim</span><span class="o">*</span><span class="mi">1</span><span class="p">))</span><span class="c1"># = bool(int(cfg[63]))</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nstorms</span><span class="p">))</span><span class="c1"># = int(cfg[64])</span>
        <span class="n">stormdict</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stormcapture</span><span class="p">:</span>
            <span class="n">stormdict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="o">+</span><span class="s2">&quot;|&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stormcapture</span><span class="p">[</span><span class="n">arg</span><span class="p">]))</span>
        <span class="n">stormdict</span> <span class="o">=</span> <span class="s2">&quot;&amp;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stormdict</span><span class="p">)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stormdict</span><span class="p">)</span>
        <span class="n">otherdict</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">otherargs</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">arg</span><span class="o">+</span><span class="s2">&quot;|&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">otherargs</span><span class="p">[</span><span class="n">arg</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">otherargs</span><span class="p">[</span><span class="n">arg</span><span class="p">])</span><span class="o">==</span><span class="nb">int</span><span class="p">:</span>
                <span class="n">item</span><span class="o">+=</span><span class="s2">&quot;~i&quot;</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">otherargs</span><span class="p">[</span><span class="n">arg</span><span class="p">])</span><span class="o">==</span><span class="nb">str</span><span class="p">:</span>
                <span class="n">item</span><span class="o">+=</span><span class="s2">&quot;~s&quot;</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">otherargs</span><span class="p">[</span><span class="n">arg</span><span class="p">])</span><span class="o">==</span><span class="nb">float</span><span class="p">:</span>
                <span class="n">item</span><span class="o">+=</span><span class="s2">&quot;~f&quot;</span>
            <span class="n">otherdict</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="n">cfg</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&amp;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">otherdict</span><span class="p">))</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">cfgf</span><span class="p">:</span>
            <span class="n">cfgf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cfg</span><span class="p">))</span></div>
        
    <span class="k">def</span> <span class="nf">_rm_namelist_param</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">namelist</span><span class="p">,</span><span class="n">arg</span><span class="p">,</span><span class="n">val</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Remove an argument from a namelist&#39;&#39;&#39;</span>
        
        <span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
        <span class="n">fnl</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">found</span><span class="o">=</span><span class="kc">False</span>
        <span class="n">fnl1</span><span class="o">=</span><span class="n">fnl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;=&#39;</span> <span class="ow">in</span> <span class="n">fnl1</span><span class="p">:</span>
            <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;EQ&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;CM&#39;</span>
        <span class="c1">#print fnl1</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">fnl1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">fnl1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">!=</span><span class="s2">&quot;,&quot;</span><span class="p">:</span>
            <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;EQ&#39;</span>
        
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">fnl</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">=</span><span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]:</span>
                <span class="n">found</span><span class="o">=</span><span class="kc">True</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">arg</span><span class="o">+</span><span class="s1">&#39;=&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]:</span>
                <span class="n">found</span><span class="o">=</span><span class="kc">True</span>
            <span class="k">if</span> <span class="n">found</span><span class="p">:</span>
                <span class="n">fnl</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
                <span class="k">break</span>
                
        <span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fnl</span><span class="p">))</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
              
    <span class="k">def</span> <span class="nf">_edit_namelist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">namelist</span><span class="p">,</span><span class="n">arg</span><span class="p">,</span><span class="n">val</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Either edit or add argument/value pair to a namelist&#39;&#39;&#39;</span>
        
        <span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
        <span class="n">fnl</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">found</span><span class="o">=</span><span class="kc">False</span>
        <span class="n">fnl1</span><span class="o">=</span><span class="n">fnl</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;=&#39;</span> <span class="ow">in</span> <span class="n">fnl1</span><span class="p">:</span>
            <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;EQ&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;CM&#39;</span>
        <span class="c1">#print fnl1</span>
        <span class="n">item</span> <span class="o">=</span> <span class="n">fnl1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">item</span> <span class="o">=</span> <span class="n">fnl1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">!=</span><span class="s2">&quot;,&quot;</span><span class="p">:</span>
            <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;EQ&#39;</span>
        
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">fnl</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">):</span>
            <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">=</span><span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]:</span>
                <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">arg</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">),</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
                <span class="n">found</span><span class="o">=</span><span class="kc">True</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">arg</span><span class="o">+</span><span class="s1">&#39;=&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]:</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">item</span><span class="o">==</span><span class="s1">&#39;&#39;</span><span class="p">:</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">][</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;,&#39;</span><span class="p">:</span>
                    <span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
                <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">arg</span><span class="o">+</span><span class="s1">&#39;=&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">),</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">tag</span><span class="p">]</span>
                <span class="n">found</span><span class="o">=</span><span class="kc">True</span>
            <span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fnl</span><span class="p">[</span><span class="n">l</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mode</span><span class="o">==</span><span class="s1">&#39;EQ&#39;</span><span class="p">:</span>
                <span class="n">fnl</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">arg</span><span class="o">+</span><span class="s1">&#39; = &#39;</span><span class="o">+</span><span class="n">val</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fnl</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">arg</span><span class="o">+</span><span class="s1">&#39;= &#39;</span><span class="o">+</span><span class="n">val</span><span class="o">+</span><span class="s1">&#39; ,&#39;</span><span class="p">)</span>
            
        <span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fnl</span><span class="p">))</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">_edit_postnamelist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">namelist</span><span class="p">,</span><span class="n">arg</span><span class="p">,</span><span class="n">val</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Edit postprocessing namelist&#39;&#39;&#39;</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">pnl</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            
        <span class="n">flag</span><span class="o">=</span><span class="kc">False</span>
        <span class="n">pnl</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">pnl</span> <span class="k">if</span> <span class="n">y</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pnl</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">pnl</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="n">arg</span><span class="p">:</span>
                <span class="n">pnl</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">=</span><span class="n">arg</span><span class="o">+</span><span class="s2">&quot;=&quot;</span><span class="o">+</span><span class="n">val</span>
                <span class="n">flag</span><span class="o">=</span><span class="kc">True</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">flag</span><span class="p">:</span>
            <span class="n">pnl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arg</span><span class="o">+</span><span class="s1">&#39;=&#39;</span><span class="o">+</span><span class="n">val</span><span class="p">)</span>
        <span class="n">pnl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pnl</span><span class="p">))</span>
            
    <span class="k">def</span> <span class="nf">_add_postcodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">namelist</span><span class="p">,</span><span class="n">newcodes</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Add postprocessor codes to postprocessor namelist&#39;&#39;&#39;</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">pnl</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">pnl</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">pnl</span> <span class="k">if</span> <span class="n">y</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pnl</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">pnl</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;code&quot;</span><span class="p">:</span>
                <span class="n">codes</span> <span class="o">=</span> <span class="n">pnl</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">lineno</span><span class="o">=</span><span class="n">n</span>
                <span class="k">break</span>
        <span class="n">ncodes</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">codes</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">newcodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">ncodes</span><span class="p">:</span>
                <span class="n">ncodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">pnl</span><span class="p">[</span><span class="n">lineno</span><span class="p">]</span><span class="o">+=</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ncodes</span><span class="p">])</span>
        <span class="c1">#print &quot;Writing to %s/%s: \n&quot;%(home,filename)+&#39;\n&#39;.join(pnl)+&quot;\n&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pnl</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_rm_postcodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">namelist</span><span class="p">,</span><span class="n">rmcodes</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Add postprocessor codes to postprocessor namelist&#39;&#39;&#39;</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">pnl</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">pnl</span> <span class="o">=</span> <span class="p">[</span><span class="n">y</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">pnl</span> <span class="k">if</span> <span class="n">y</span><span class="o">!=</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pnl</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">pnl</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;code&quot;</span><span class="p">:</span>
                <span class="n">codes</span> <span class="o">=</span> <span class="n">pnl</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">lineno</span><span class="o">=</span><span class="n">n</span>
                <span class="k">break</span>
        <span class="n">ncodes</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">codes</span><span class="p">]</span>
        
        <span class="n">newcodes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ncodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">rmcodes</span><span class="p">:</span>
                <span class="n">newcodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="n">pnl</span><span class="p">[</span><span class="n">lineno</span><span class="p">]</span><span class="o">+=</span><span class="s1">&#39;,&#39;</span><span class="o">+</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">newcodes</span><span class="p">])</span>
        <span class="c1">#print &quot;Writing to %s/%s: \n&quot;%(home,filename)+&#39;\n&#39;.join(pnl)+&quot;\n&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">workdir</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">namelist</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pnl</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="TLaquaplanet"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.TLaquaplanet">[docs]</a><span class="k">class</span> <span class="nc">TLaquaplanet</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="TLaquaplanet.configure"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.TLaquaplanet.configure">[docs]</a>    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">timestep</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span><span class="n">snapshots</span><span class="o">=</span><span class="mi">720</span><span class="p">,</span><span class="n">eccentricity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">ozone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                  <span class="n">obliquity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">physicsfilter</span><span class="o">=</span><span class="s2">&quot;gp|exp|sp&quot;</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TLaquaplanet</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">synchronous</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">fixedorbit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">aquaplanet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">eccentricity</span><span class="o">=</span><span class="n">eccentricity</span><span class="p">,</span><span class="n">obliquity</span><span class="o">=</span><span class="n">obliquity</span><span class="p">,</span><span class="n">timestep</span><span class="o">=</span><span class="n">timestep</span><span class="p">,</span>
                          <span class="n">snapshots</span><span class="o">=</span><span class="n">snapshots</span><span class="p">,</span><span class="n">physicsfilter</span><span class="o">=</span><span class="n">physicsfilter</span><span class="p">,</span><span class="n">ozone</span><span class="o">=</span><span class="n">ozone</span><span class="p">,</span>
                          <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>
        
<div class="viewcode-block" id="TLlandplanet"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.TLlandplanet">[docs]</a><span class="k">class</span> <span class="nc">TLlandplanet</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span> <span class="c1">#Default will be ZERO soil water; set soilsaturation if you want any</span>
<div class="viewcode-block" id="TLlandplanet.configure"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.TLlandplanet.configure">[docs]</a>    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">timestep</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span><span class="n">snapshots</span><span class="o">=</span><span class="mi">720</span><span class="p">,</span><span class="n">eccentricity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">ozone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                  <span class="n">obliquity</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span><span class="n">physicsfilter</span><span class="o">=</span><span class="s2">&quot;gp|exp|sp&quot;</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">TLlandplanet</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">synchronous</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">fixedorbit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">desertplanet</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                          <span class="n">eccentricity</span><span class="o">=</span><span class="n">eccentricity</span><span class="p">,</span><span class="n">obliquity</span><span class="o">=</span><span class="n">obliquity</span><span class="p">,</span><span class="n">timestep</span><span class="o">=</span><span class="n">timestep</span><span class="p">,</span>
                          <span class="n">snapshots</span><span class="o">=</span><span class="n">snapshots</span><span class="p">,</span><span class="n">physicsfilter</span><span class="o">=</span><span class="n">physicsfilter</span><span class="p">,</span><span class="n">ozone</span><span class="o">=</span><span class="n">ozone</span><span class="p">,</span>
                          <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>
        
<div class="viewcode-block" id="Earthlike"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Earthlike">[docs]</a><span class="k">class</span> <span class="nc">Earthlike</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
<div class="viewcode-block" id="Earthlike.configure"><a class="viewcode-back" href="../../source/exoplasim.html#exoplasim.preinit.Earthlike.configure">[docs]</a>    <span class="k">def</span> <span class="nf">configure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">timestep</span><span class="o">=</span><span class="mf">45.0</span><span class="p">,</span><span class="n">snapshots</span><span class="o">=</span><span class="mi">480</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">Earthlike</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">vtype</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">modeltop</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span><span class="n">timestep</span><span class="o">=</span><span class="n">timestep</span><span class="p">,</span>
                          <span class="n">snapshots</span><span class="o">=</span><span class="n">snapshots</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>

</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Adiv Paradise

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>