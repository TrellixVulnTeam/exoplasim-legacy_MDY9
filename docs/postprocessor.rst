---------------------------
Burn7 Postprocessor Options
---------------------------

Building and Compiling
----------------------

To build ``burn7`` for the very first time, in the exoplasim/postprocessor folder, run:::

    ./build_init.sh
    
**You must have a netCDF C++ library already available, which contains netcdf.h.** A
patched NetCDF library will be built with the features burn7 needs, and it will need
your netcdf.h.

To recompile the postprocessor without rebuilding the patched NetCDF library, in the 
exoplasim/postprocessor folder, run:::
    
    ./compile.sh
    
Manual Usage
------------

To postprocess raw ExoPlaSim output into NetCDF files, you will need to provide ``burn7``
with a namelist, direct its standard output to a log file, specify the raw output file,
and specify an output file (which does not need to exist yet):::

    ./burn7.x -n<example.nl>burnout [raw_output_file] [output_file]
    
If instead of ``-n`` you use ``-g``, ``.srv`` SERVICE files will be written, and a GraDS
control file will be create--e.g. if ``output_file`` is ``mymodel``, the output will be 
``mymodel.srv`` and ``mymodel.ctl``. If you wish to use NetCDF output (the default), 
you will need to give ``mymodel.nc`` as ``output_file`` instead of simply ``mymodel``.`

The namelist file can take the following parameters:

Parameters
##########
    code : list of integers
        A comma-separated list of integers, corresponding to the output codes listed in the table below.
    vtype : {S, P}
        Whether output vertical structure should be by sigma level (as is native for PlaSim), or converted to pressure levels. Strongly recommend keeping this to S, for sigma levels.
    htype : {S, F, Z, G}
        Whether horizontal representation should be as spherical harmonics (S), Fourier coefficients (F), zonal averagez (Z), or Gauss-spaced latitude-longitude grid (G). Strongly recommend keeping this to G, unless you know what you're doing.
    mean : {0, 1, 2, 3}
        What kind of averaging to do. 3 is the default, and 0 is no time averaging. 1 is monthly means, and 2 is monthly standard deviations. 3 is a combination of both. Mean!=0 can only be used with htype=G.
    netcdf : {0, 1}
        If 1, write NetCDF output file; if 0, write ``.srv`` SERVICE output. 
    mars : {0, 1} (optional)
        If 1, use Mars defaults for computing derived variables.
    gravity : float (optional)
        Surface gravity in m/s\ :sup:`2`. Defaults to Earth gravity.
    radius : float (optional)
        Planet radius in meters. Defaults to Earth's radius.

Postprocessor Variable Codes
----------------------------

+----------+-------+----------------------------------------+---------------------------+---------------+
| Variable |  Code |  Description                           | Units                     |  Notes        |
+==========+=======+========================================+===========================+===============+
|   mld    |  110  |  mixed layer depth                     |  m                        |               |  
+----------+-------+----------------------------------------+---------------------------+---------------+
|   sg     |  129  |  surface geopotential                  |  m\ :sup:`2` s\ :sup:`-2` |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   ta     |  130  |  air temperature                       |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   ua     |  131  |  eastward wind                         |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   va     |  132  |  northward wind                        |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   hus    |  133  |  specific humidity                     |  kg/kg                    |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   ps     |  134  |  surface air pressure                  |  hPa                      |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   wap    |  135  |  vertical air velocity                 |  Pa s-1                   |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   wa     |  137  |  upward wind                           |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   zeta   |  138  |  atm relative vorticity                |  s\ :sup:`-1`             |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   ts     |  139  |  surface temperature                   |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   mrso   |  140  |  lwe of soil moisture content          |  m                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   snd    |  141  |  surface snow thickness                |  m                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   prl    |  142  |  lwe of large scale precipitation      |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   prc    |  143  |  convective precipitation rate         |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   prsn   |  144  |  lwe of snowfall amount                |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   bld    |  145  |  dissipation in boundary layer         |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   hfss   |  146  |  surface sensible heat flux            |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   hfls   |  147  |  surface latent heat flux              |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   stf    |  148  |  streamfunction                        |  m\ :sup:`2` s\ :sup:`-2` |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   psi    |  149  |  velocity potential                    |  m\ :sup:`2` s\ :sup:`-2` |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   psl    |  151  |  air pressure at sea level             |  hPa                      |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   pl     |  152  |  log surface pressure                  |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+       
|   d      |  155  |  divergence of wind                    |  s\ :sup:`-1`             |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   zg     |  156  |  geopotential height                   |  m                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   hur    |  157  |  relative humidity                     |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+       
|   tps    |  158  |  tendency of surface air pressure      |  Pa s-1                   |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   u3     |  159  |  u*                                    |  m\ :sup:`3` s\ :sup:`-3` |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   mrro   |  160  |  surface runoff                        |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   clw    |  161  |  liquid water content                  |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+       
|   cl     |  162  |  cloud area fraction in layer          |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+       
|   tcc    |  163  |  total cloud cover                     |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+       
|   clt    |  164  |  cloud area fraction                   |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+       
|   uas    |  165  |  eastward wind 10m                     |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   vas    |  166  |  northward wind 10m                    |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   tas    |  167  |  air temperature 2m                    |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   td2m   |  168  |  dew point temperature 2m              |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   tsa    |  169  |  surface temperature accumulated       |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   tsod   |  170  |  deep soil temperature                 |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   dsw    |  171  |  deep soil wetness                     |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   lsm    |  172  |  land binary mask                      |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   z0     |  173  |  surface roughness length              |  m                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   alb    |  174  |  surface albedo                        |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   as     |  175  |  surface albedo                        |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   rss    |  176  |  surface net shortwave flux            |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   rls    |  177  |  surface net longwave flux             |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   rst    |  178  |  toa net shortwave flux                |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   rlut   |  179  |  toa net longwave flux                 |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+ 
|   tauu   |  180  |  surface eastward stress               |  Pa                       |               |
+----------+-------+----------------------------------------+---------------------------+---------------+ 
|   tauv   |  181  |  surface northward stress              |  Pa                       |               |
+----------+-------+----------------------------------------+---------------------------+---------------+ 
|   evap   |  182  |  lwe of water evaporation              |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+ 
|   tso    |  183  |  climate deep soil temperature         |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   wsoi   |  184  |  climate deep soil wetness             |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   vegc   |  199  |  vegetation cover                      |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   rsut   |  203  |  toa outgoing shortwave flux           |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   ssru   |  204  |  surface solar radiation upward        |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   stru   |  205  |  surface thermal radiation upward      |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   tso2   |  207  |  soil temperature level 2              |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   tso3   |  208  |  soil temperature level 3              |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   tso4   |  209  |  soil temperature level 4              |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   sic    |  210  |  sea ice cover                         |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   sit    |  211  |  sea ice thickness                     |  m                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   vegf   |  212  |  forest cover                          |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   snm    |  218  |  snow melt                             |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   sndc   |  221  |  snow depth change                     |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   prw    |  230  |  atmosphere water vapor content        |  kg m\ :sup:`-2`          |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   glac   |  232  |  glacier cover                         |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+       
|   tsn    |  238  |  snow temperature                      |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   spd    |  259  |  wind speed                            |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   pr     |  260  |  total precipitation                   |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   ntr    |  261  |  net top radiation                     |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   nbr    |  262  |  net bottom radiation                  |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   hfns   |  263  |  surface downward heat flux            |  W m\ :sup:`-2`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   wfn    |  264  |  net water flux                        |  m s\ :sup:`-1`           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   lwth   |  266  |  local weathering                      |  W earth                  |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   grnz   |  267  |  ground geopotential                   |  m\ :sup:`2` s\ :sup:`-2` |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   icez   |  301  |  glacier geopotential                  |  m\ :sup:`2` s\ :sup:`-2` |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   netz   |  302  |  net geopotential                      |  m\ :sup:`2` s\ :sup:`-2` |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   dpdx   |  273  |  d(ps)/dx                              |  Pa m\ :sup:`-1`          |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   dpdy   |  274  |  d(ps)/dy                              |  Pa m\ :sup:`-1`          |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   hlpr   |  277  |  half level pressure                   |  Pa                       |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   flpr   |  278  |  full level pressure                   |  Pa                       |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   czen   |  318  |  cosine solar zenith angle             |  nondimensional           |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   wthpr  |  319  |  weatherable precipitation             |  mm day\ :sup:`-1`        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   mint   |  320  |  minimum temperature                   |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   maxt   |  321  |  maximum temperature                   |  K                        |               |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   cape   |  322  |  convective available potential energy |  J kg\ :sup:`-1`          |  Storm Clim.  |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   lnb    |  323  |  level of neutral buoyancy             |  hPa                      |  Storm Clim.  |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   sdef   |  324  |  troposphere entropy deficit           |  nondimensional           |  Storm Clim.  |
+----------+-------+----------------------------------------+---------------------------+---------------+      
|   absz   |  325  |  sigma-0.85 abs vorticity              |  s\ :sup:`-1`             |  Storm Clim.  |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   umax   |  326  |  maximum potential intensity           |  m s\ :sup:`-1`           |  Storm Clim.  |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   vent   |  327  |  ventilation index                     |  nondimensional           |  Storm Clim.  |
+----------+-------+----------------------------------------+---------------------------+---------------+      
|   vrumax |  328  |  ventilation-reduced maximum wind      |  m s\ :sup:`-1`           |  Storm Clim.  |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   gpi    |  329  |  genesis potential index               |  nondimensional           |  Storm Clim.  |
+----------+-------+----------------------------------------+---------------------------+---------------+   
|   dfu    |  404  |  shortwave up                          |  W m\ :sup:`-2`           | Snapshot Only |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   dfd    |  405  |  shortwave down                        |  W m\ :sup:`-2`           | Snapshot Only |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   dftu   |  406  |  longwave up                           |  W m\ :sup:`-2`           | Snapshot Only |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   dftd   |  407  |  longwave down                         |  W m\ :sup:`-2`           | Snapshot Only |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   dtdt   |  408  |  radiative heating rate                |  K s\ :sup:`-1`           | Snapshot Only |
+----------+-------+----------------------------------------+---------------------------+---------------+
|   dfdz   |  409  |  flux convergence                      |  W m\ :sup:`-3`           | Snapshot Only |
+----------+-------+----------------------------------------+---------------------------+---------------+
 